(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25a3ba88"],{"0f50":function(e,t,a){},"21f4":function(e,t,a){"use strict";a("a9e3"),a("4d63"),a("ac1f"),a("25f0"),a("5319");var s={transDate:function(e,t){if(!e)return"";t=t||"yyyy-MM-dd hh:mm:ss",e=/^[0-9]*$/.test(e)?Number(e):new Date(e).getTime();var a=new Date(e),s={"y+":a.getFullYear(),"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds()};for(var r in new RegExp("(y+)").test(t)&&(t=t.replace(RegExp.$1,s["y+"])),s)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?s[r]:("00"+s[r]).substr((""+s[r]).length)));return t},getTime:function(){var e=new Date,t=e.getFullYear()+"",a=e.getMonth()+1;a=a>9?a:"0"+a;var s=e.getDate();return s=s>9?s:"0"+s,t+a+s}};t["a"]=s},"4d63":function(e,t,a){var s=a("83ab"),r=a("da84"),n=a("94ca"),o=a("7156"),i=a("9bf2").f,l=a("241c").f,c=a("44e7"),u=a("ad6d"),m=a("9f7f"),p=a("6eeb"),d=a("d039"),f=a("69f3").set,b=a("2626"),v=a("b622"),g=v("match"),h=r.RegExp,$=h.prototype,y=/a/g,N=/a/g,_=new h(y)!==y,E=m.UNSUPPORTED_Y,A=s&&n("RegExp",!_||E||d((function(){return N[g]=!1,h(y)!=y||h(N)==N||"/a/i"!=h(y,"i")})));if(A){var w=function(e,t){var a,s=this instanceof w,r=c(e),n=void 0===t;if(!s&&r&&e.constructor===w&&n)return e;_?r&&!n&&(e=e.source):e instanceof w&&(n&&(t=u.call(e)),e=e.source),E&&(a=!!t&&t.indexOf("y")>-1,a&&(t=t.replace(/y/g,"")));var i=o(_?new h(e,t):h(e,t),s?this:$,w);return E&&a&&f(i,{sticky:a}),i},x=function(e){e in w||i(w,e,{configurable:!0,get:function(){return h[e]},set:function(t){h[e]=t}})},I=l(h),T=0;while(I.length>T)x(I[T++]);$.constructor=w,w.prototype=$,p(r,"RegExp",w)}b("RegExp")},5319:function(e,t,a){"use strict";var s=a("d784"),r=a("825a"),n=a("7b0b"),o=a("50c4"),i=a("a691"),l=a("1d80"),c=a("8aa5"),u=a("14c3"),m=Math.max,p=Math.min,d=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,b=/\$([$&'`]|\d\d?)/g,v=function(e){return void 0===e?e:String(e)};s("replace",2,(function(e,t,a,s){var g=s.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=s.REPLACE_KEEPS_$0,$=g?"$":"$0";return[function(a,s){var r=l(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,r,s):t.call(String(r),a,s)},function(e,s){if(!g&&h||"string"===typeof s&&-1===s.indexOf($)){var n=a(t,e,this,s);if(n.done)return n.value}var l=r(e),d=String(this),f="function"===typeof s;f||(s=String(s));var b=l.global;if(b){var N=l.unicode;l.lastIndex=0}var _=[];while(1){var E=u(l,d);if(null===E)break;if(_.push(E),!b)break;var A=String(E[0]);""===A&&(l.lastIndex=c(d,o(l.lastIndex),N))}for(var w="",x=0,I=0;I<_.length;I++){E=_[I];for(var T=String(E[0]),F=m(p(i(E.index),d.length),0),k=[],S=1;S<E.length;S++)k.push(v(E[S]));var D=E.groups;if(f){var R=[T].concat(k,F,d);void 0!==D&&R.push(D);var V=String(s.apply(void 0,R))}else V=y(T,d,F,k,D,s);F>=x&&(w+=d.slice(x,F)+V,x=F+T.length)}return w+d.slice(x)}];function y(e,a,s,r,o,i){var l=s+e.length,c=r.length,u=b;return void 0!==o&&(o=n(o),u=f),t.call(i,u,(function(t,n){var i;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return a.slice(0,s);case"'":return a.slice(l);case"<":i=o[n.slice(1,-1)];break;default:var u=+n;if(0===u)return t;if(u>c){var m=d(u/10);return 0===m?t:m<=c?void 0===r[m-1]?n.charAt(1):r[m-1]+n.charAt(1):t}i=r[u-1]}return void 0===i?"":i}))}}))},7156:function(e,t,a){var s=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var n,o;return r&&"function"==typeof(n=t.constructor)&&n!==a&&s(o=n.prototype)&&o!==a.prototype&&r(e,o),e}},"99af":function(e,t,a){"use strict";var s=a("23e7"),r=a("d039"),n=a("e8b5"),o=a("861d"),i=a("7b0b"),l=a("50c4"),c=a("8418"),u=a("65f0"),m=a("1dde"),p=a("b622"),d=a("2d00"),f=p("isConcatSpreadable"),b=9007199254740991,v="Maximum allowed index exceeded",g=d>=51||!r((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),h=m("concat"),$=function(e){if(!o(e))return!1;var t=e[f];return void 0!==t?!!t:n(e)},y=!g||!h;s({target:"Array",proto:!0,forced:y},{concat:function(e){var t,a,s,r,n,o=i(this),m=u(o,0),p=0;for(t=-1,s=arguments.length;t<s;t++)if(n=-1===t?o:arguments[t],$(n)){if(r=l(n.length),p+r>b)throw TypeError(v);for(a=0;a<r;a++,p++)a in n&&c(m,p,n[a])}else{if(p>=b)throw TypeError(v);c(m,p++,n)}return m.length=p,m}})},"9c47":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("breadcrumb-nav",{staticClass:"margin-b20"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" "+e._s(e.$t("ns.addNameSpace"))+" ")])],1),a("el-table",{attrs:{data:e.dataList,border:"","empty-text":e.$t("common.noData")}},[a("el-table-column",{attrs:{prop:"namespace",label:e.$t("ns.nameSpaceName")}}),a("el-table-column",{attrs:{prop:"isActive",label:e.$t("user.isActive"),formatter:e.translationActive}}),a("el-table-column",{attrs:{prop:"remarks",label:e.$t("DI.description")}}),a("el-table-column",{attrs:{label:e.$t("common.operation")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{size:"medium"},on:{command:e.handleCommand}},[a("el-button",{staticClass:"multi-operate-btn",attrs:{type:"text",icon:"el-icon-more",round:""}}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("updateItem",t.row)}},[e._v(e._s(e.$t("common.modify")))]),a("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("deleteItem",t.row)}},[e._v(e._s(e.$t("common.delete")))]),a("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("resourceQuota",t.row)}},[e._v(e._s(e.$t("ns.resourceQuota")))]),a("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("viewDetails",t.row)}},[e._v(e._s(e.$t("ns.viewDetails")))]),a("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("settingGroup",t.row)}},[e._v(e._s(e.$t("user.userGroupSettings")))])],1)],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pagination.pageNumber,"page-sizes":e.sizeList,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.totalPage,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,"custom-class":"dialog-style",width:"900px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.clearDialogForm}},[a("el-form",{ref:"formValidate",attrs:{model:e.form,rules:e.ruleValidate,"label-width":"160px"}},[a("el-form-item",{attrs:{label:e.$t("ns.nameSpaceName"),prop:"namespace"}},[a("el-input",{attrs:{placeholder:e.$t("ns.nsNamePro"),disabled:e.modify},model:{value:e.form.namespace,callback:function(t){e.$set(e.form,"namespace",t)},expression:"form.namespace"}})],1),a("el-form-item",{attrs:{label:e.$t("ns.platformNameSpace")}},[a("el-input",{attrs:{placeholder:e.$t("ns.platformNsPro"),disabled:""},model:{value:e.platformNamespace,callback:function(t){e.platformNamespace=t},expression:"platformNamespace"}})],1),a("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("ns.otherAnnotations"))+": ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("ns.lbGpuModel"),prop:"lbGpuModel"}},[a("el-input",{attrs:{placeholder:e.$t("ns.lbGpuModelPro")},model:{value:e.form.lbGpuModel,callback:function(t){e.$set(e.form,"lbGpuModel",t)},expression:"form.lbGpuModel"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("ns.lbBusType"),prop:"lbBusType"}},[a("el-input",{attrs:{placeholder:e.$t("ns.lbBusTypePro")},model:{value:e.form.lbBusType,callback:function(t){e.$set(e.form,"lbBusType",t)},expression:"form.lbBusType"}})],1)],1)],1),a("el-form-item",{attrs:{label:e.$t("user.isActive"),prop:"isActive"}},[a("el-select",{attrs:{placeholder:e.$t("user.activePro")},model:{value:e.form.isActive,callback:function(t){e.$set(e.form,"isActive",t)},expression:"form.isActive"}},[a("el-option",{attrs:{label:e.$t("common.yes"),value:1}})],1)],1),a("el-form-item",{attrs:{label:e.$t("ns.nsDescribe"),prop:"remarks"}},[a("el-input",{attrs:{type:"textarea",placeholder:e.$t("ns.nsDescribePro")},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.subInfo}},[e._v(e._s(e.$t("common.save")))]),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))])],1)],1),a("el-dialog",{attrs:{title:e.$t("ns.resourceQuota"),visible:e.resourceVisible,"custom-class":"dialog-style",width:"650px"},on:{"update:visible":function(t){e.resourceVisible=t},close:e.clearResource}},[a("el-form",{ref:"resourceForm",attrs:{model:e.resource,rules:e.ruleValidate,"label-width":"140px"}},[a("el-form-item",{attrs:{label:e.$t("ns.nameSpaceName"),prop:"namespace"}},[a("el-input",{attrs:{placeholder:e.$t("ns.nsNamePro"),disabled:""},model:{value:e.resource.namespace,callback:function(t){e.$set(e.resource,"namespace",t)},expression:"resource.namespace"}})],1),a("el-form-item",{attrs:{label:e.$t("AIDE.cpu"),prop:"cpu"}},[a("el-input",{attrs:{placeholder:e.$t("ns.CPUPro")},model:{value:e.resource.cpu,callback:function(t){e.$set(e.resource,"cpu",t)},expression:"resource.cpu"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("Core")])])],1),a("el-form-item",{attrs:{label:e.$t("AIDE.gpu"),prop:"gpu"}},[a("el-input",{attrs:{placeholder:e.$t("ns.GPUPro")},model:{value:e.resource.gpu,callback:function(t){e.$set(e.resource,"gpu",t)},expression:"resource.gpu"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v(e._s(e.$t("DI.block")))])])],1),a("el-form-item",{attrs:{label:e.$t("AIDE.memory"),prop:"memoryAmount"}},[a("el-input",{attrs:{placeholder:e.$t("ns.memoryPro")},model:{value:e.resource.memoryAmount,callback:function(t){e.$set(e.resource,"memoryAmount",t)},expression:"resource.memoryAmount"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("Mi")])])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.subResourceQuota}},[e._v(e._s(e.$t("common.save")))]),a("el-button",{on:{click:function(t){e.resourceVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))])],1)],1),a("el-dialog",{attrs:{title:e.$t("ns.nsInstance"),visible:e.instanceVisible,"custom-class":"instance-dialog",width:"800px"},on:{"update:visible":function(t){e.instanceVisible=t}}},[e.instanceName?a("div",{staticClass:"instance"},[a("span",{staticClass:"title"},[e._v(" "+e._s(e.$t("ns.nameSpaceName"))+": ")]),a("span",[e._v(" "+e._s(e.instanceName)+" ")])]):e._e(),e.instanceTime?a("div",{staticClass:"instance"},[a("span",{staticClass:"title"},[e._v(" "+e._s(e.$t("DI.createTime"))+": ")]),a("span",[e._v(" "+e._s(e.instanceTime)+" ")])]):e._e(),a("el-table",{attrs:{data:e.instanceList,border:"","empty-text":e.$t("common.noData")}},[a("el-table-column",{attrs:{prop:"nameSpace",label:e.$t("ns.attributesName")}}),a("el-table-column",{attrs:{prop:"additionalProp",label:e.$t("ns.attributesValue")}})],1)],1)],1)},r=[],n=(a("99af"),a("4d63"),a("ac1f"),a("25f0"),a("498a"),a("21f4")),o={data:function(){return{dialogVisible:!1,resourceVisible:!1,instanceVisible:!1,form:{id:"",namespace:"",lbGpuModel:"",lbBusType:"",remarks:"",isActive:1,enableFlag:1},resource:{namespace:"",cpu:"",gpu:"",memoryAmount:""},modify:!1,dataList:[],instanceList:[],instanceName:"",instanceTime:"",platformNamespace:""}},mounted:function(){this.getListData(),this.platformNamespace=this.FesEnv.ns.platformNamespace?this.FesEnv.ns.platformNamespace:"default"},computed:{title:function(){return this.modify?this.$t("ns.modifyNs"):this.$t("ns.newNs")},getUrl:function(){return"/cc/".concat(this.FesEnv.ccApiVersion,"/namespaces")},ruleValidate:function(){return this.resetFormFields(),this.resetResourceFields(),{namespace:[{required:!0,message:this.$t("ns.nsNameReq")},{pattern:new RegExp(/^.*[^\s][\s\S]*$/),message:this.$t("ns.nsNameReq")}],isActive:[{required:!0,message:this.$t("user.activeReq")}],cpu:[{required:!0,message:this.$t("DI.CPUReq")},{pattern:new RegExp(/^((0{1})([.]\d{1})|([1-9]\d*)([.]\d{1})?)|([0]{1})$/),message:this.$t("ns.CPUFormat")}],gpu:[{required:!0,message:this.$t("ns.GPUReq")},{pattern:new RegExp(/^(([1-9]{1}\d*([.]0)*)|([0]{1}))$/),message:this.$t("ns.GPUFormat")}],memoryAmount:[{required:!0,message:this.$t("DI.memoryReq")},{pattern:new RegExp(/^(([1-9]{1}\d*([.]0)*)|([0]{1}))*$/),message:this.$t("ns.memoryFormat")}]}}},methods:{resetResourceFields:function(){var e=this;setTimeout((function(){e.$refs.resourceForm&&e.$refs.resourceForm.resetFields()}),10)},translationActive:function(e,t){return this.$t("common.yes")},updateItem:function(e){var t=this;this.dialogVisible=!0,this.modify=!0,setTimeout((function(){Object.assign(t.form,e),t.form.lbGpuModel=void 0===e.annotations||void 0===e.annotations["lb-gpu-model"]?"":e.annotations["lb-gpu-model"],t.form.lbBusType=void 0===e.annotations||void 0===e.annotations["lb-bus-type"]?"":e.annotations["lb-bus-type"]}),0)},deleteItem:function(e){var t="/cc/".concat(this.FesEnv.ccApiVersion,"/namespaces/namespace/").concat(e.namespace);this.deleteListItem(t)},resourceQuota:function(e){var t=this;this.resourceVisible=!0,this.$nextTick((function(){t.resource.namespace=e.namespace,e.hard&&(t.resource.cpu=e.hard["limits.cpu"]+"",t.resource.gpu=e.hard["requests.nvidia.com/gpu"]+"",t.resource.memoryAmount=parseFloat(e.hard["limits.memory"])+"")}))},viewDetails:function(e){var t=this,a="/cc/".concat(this.FesEnv.ccApiVersion,"/namespaces/namespace/").concat(e.namespace);this.FesApi.fetch(a,"get").then((function(e){if(e&&"{}"!==JSON.stringify(e)){var a=e.metadata.annotations,s=e.metadata,r=[];if(s&&a&&"{}"!==JSON.stringify(a))for(var o in t.instanceName=e.metadata.namespace,t.instanceTime=n["a"].transDate(s.creationTimestamp.millis),a)if(a[o]){var i={nameSpace:o,additionalProp:a[o]};r.push(i)}t.instanceList=r}else t.instanceName="",t.instanceTime="",t.instanceList=[];t.instanceVisible=!0}))},settingGroup:function(e){this.$router.push({name:"settingNamespaceGroup",params:{namespace:e.namespace},query:{nid:e.id}})},subResourceQuota:function(){var e=this;this.$refs.resourceForm.validate((function(t){if(t){e.setBtnDisabeld();var a={cpu:e.resource.cpu+"",gpu:e.resource.gpu+"",namespace:e.resource.namespace,memory:{memoryAmount:e.resource.memoryAmount+"",memoryUnit:"Mi"}};e.FesApi.fetchUT("/cc/".concat(e.FesEnv.ccApiVersion,"/resources"),a,"put").then((function(){e.getListData(),e.toast(),e.resourceVisible=!1}))}}))},subInfo:function(){var e=this;this.$refs.formValidate.validate((function(t){if(t){e.setBtnDisabeld();for(var a={},s=["id","namespace","remarks"],r=0,n=s;r<n.length;r++){var o=n[r];a[o]=e.form[o]}a.platformNamespace=e.platformNamespace,a.annotations={},a.annotations["lb-gpu-model"]=e.form.lbGpuModel&&e.form.lbGpuModel.trim()?e.form.lbGpuModel:null,a.annotations["lb-bus-type"]=e.form.lbBusType&&e.form.lbBusType.trim()?e.form.lbBusType:null;var i=e.modify?"put":"post";!e.modify&&delete a.id,e.FesApi.fetch("/cc/".concat(e.FesEnv.ccApiVersion,"/namespaces"),a,i).then((function(){e.getListData(),e.toast(),e.dialogVisible=!1}))}}))},clearResource:function(){this.$refs.resourceForm.resetFields()}}},i=o,l=(a("a00b"),a("2877")),c=Object(l["a"])(i,s,r,!1,null,null,null);t["default"]=c.exports},a00b:function(e,t,a){"use strict";var s=a("0f50"),r=a.n(s);r.a},a9e3:function(e,t,a){"use strict";var s=a("83ab"),r=a("da84"),n=a("94ca"),o=a("6eeb"),i=a("5135"),l=a("c6b6"),c=a("7156"),u=a("c04e"),m=a("d039"),p=a("7c73"),d=a("241c").f,f=a("06cf").f,b=a("9bf2").f,v=a("58a8").trim,g="Number",h=r[g],$=h.prototype,y=l(p($))==g,N=function(e){var t,a,s,r,n,o,i,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=v(c),t=c.charCodeAt(0),43===t||45===t){if(a=c.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:s=2,r=49;break;case 79:case 111:s=8,r=55;break;default:return+c}for(n=c.slice(2),o=n.length,i=0;i<o;i++)if(l=n.charCodeAt(i),l<48||l>r)return NaN;return parseInt(n,s)}return+c};if(n(g,!h(" 0o1")||!h("0b1")||h("+0x1"))){for(var _,E=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof E&&(y?m((function(){$.valueOf.call(a)})):l(a)!=g)?c(new h(N(t)),a,E):N(t)},A=s?d(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;A.length>w;w++)i(h,_=A[w])&&!i(E,_)&&b(E,_,f(h,_));E.prototype=$,$.constructor=E,o(r,g,E)}}}]);
//# sourceMappingURL=chunk-25a3ba88.fd6ff2ec.js.map