(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ad88861"],{"0353":function(e,t,n){"use strict";var o=n("3b23"),i=n.n(o);i.a},"158c":function(e,t,n){"use strict";var o=n("669a"),i=n.n(o);i.a},"3b23":function(e,t,n){},"56e6":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("breadcrumb-nav"),n("el-form",{ref:"queryValidate",staticClass:"query",attrs:{model:e.query}},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",[n("el-input",{attrs:{placeholder:e.$t("expExeRecord.enterSearchContent")},model:{value:e.query.query_str,callback:function(t){e.$set(e.query,"query_str",t)},expression:"query.query_str"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-button",{staticClass:"margin-l30",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.filterListData}},[e._v(" "+e._s(e.$t("common.filter"))+" ")]),n("el-button",{attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:e.resetListData}},[e._v(" "+e._s(e.$t("common.reset"))+" ")]),n("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[e._v(" "+e._s(e.currentExpId)+" ")])],1)],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","empty-text":e.$t("common.noData")}},[n("el-table-column",{attrs:{prop:"id","show-overflow-tooltip":!0,label:e.$t("expExeRecord.executionId"),"min-width":"120"}}),n("el-table-column",{attrs:{prop:"exp_name","show-overflow-tooltip":!0,label:e.$t("expExeRecord.exprimentName"),"min-width":"120"}}),n("el-table-column",{attrs:{prop:"exp_run_create_time","show-overflow-tooltip":!0,label:e.$t("expExeRecord.creationTime"),"min-width":"100"}}),n("el-table-column",{attrs:{prop:"exp_run_end_time",label:e.$t("expExeRecord.endTime"),"show-overflow-tooltip":!0,"min-width":"100"}}),n("el-table-column",{attrs:{prop:"userName",label:e.$t("expExeRecord.committer"),"show-overflow-tooltip":!0,"min-width":"80"}}),n("el-table-column",{attrs:{prop:"exp_exec_type","show-overflow-tooltip":!0,label:e.$t("expExeRecord.excutionType"),"min-width":"120"}}),n("el-table-column",{attrs:{prop:"exp_exec_status","show-overflow-tooltip":!0,label:e.$t("expExeRecord.excutionStatus"),"min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("status-tag",{attrs:{status:t.row.exp_exec_status,statusObj:e.statusObj}})]}}])}),n("el-table-column",{attrs:{label:e.$t("common.operation"),"min-width":"85"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-dropdown",{attrs:{size:"medium"},on:{command:e.handleCommand}},[n("el-button",{staticClass:"multi-operate-btn",attrs:{type:"text",icon:"el-icon-more",round:""}}),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("viewFlow",t.row)}},[e._v(e._s(e.$t("DI.taskDetail")))]),n("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("deleteItem",t.row)}},[e._v(e._s(e.$t("common.delete")))]),"Inited"===t.row.exp_exec_status||"WaitForRetry"===t.row.exp_exec_status||"Scheduled"===t.row.exp_exec_status||"Running"===t.row.exp_exec_status?n("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("stopExperiment",t.row)}},[e._v(e._s(e.$t("expExeRecord.end")))]):e._e(),n("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("toJobExeRecord",t.row)}},[e._v(e._s(e.$t("expExeRecord.taskList")))])],1)],1)]}}])})],1),n("el-pagination",{attrs:{"current-page":e.pagination.pageNumber,"page-sizes":e.sizeList,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.totalPage,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),n("el-dialog",{attrs:{title:e.$t("expExeRecord.experimentLog"),visible:e.dialogVisible,"custom-class":"dialog-style",width:"900px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeLog}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"log-box"},[e.expLog.length>0?n("div",e._l(e.expLog,(function(t,o){return n("p",{key:o},[e._v(e._s(t))])})),0):n("div",{staticClass:"no-data"},[e._v(" "+e._s(this.$t("common.noData"))+" ")])])])],1)},i=[],a=(n("99af"),n("4160"),n("dca8"),n("ac1f"),n("1276"),n("159b"),n("db15")),s=n("6322"),r=n("21f4"),u={mixins:[s["a"]],components:{StatusTag:a["a"]},data:function(){return{dialogVisible:!1,dataList:[],fromLine:1,loading:!1,expLog:[],query:{query_str:""},statusObj:{Inited:"info",WaitForRetry:"info",Scheduled:"",Running:"",Succeed:"success",Failed:"danger",Timeout:"danger",Cancelled:"warning"},flowStatus:"",historyExpId:this.$route.query.exp_id}},mounted:function(){this.getListData()},computed:{noDataText:function(){return this.loading?"":this.$t("common.noData")},currentExpId:function(){return this.historyExpId&&!this.$route.query.exp_id&&this.resetListData(),this.$route.query.exp_id}},methods:{getListData:function(){var e=this,t={page:this.pagination.pageNumber,size:this.pagination.pageSize,username:localStorage.getItem("userId")};this.query.query_str&&(t.query_str=this.query.query_str);var n="/di/".concat(this.FesEnv.diApiVersion,"/experimentRuns");this.$route.query.exp_id&&(n="/di/".concat(this.FesEnv.diApiVersion,"/experimentRunsHistory/").concat(this.$route.query.exp_id)),this.FesApi.fetch(n,t,"get").then((function(t){t.experiment_runs&&t.experiment_runs.forEach((function(e){e.exp_run_create_time=r["a"].transDate(new Date(e.exp_run_create_time).getTime()),e.exp_run_end_time="0001-01-01T00:00:00.000Z"===e.exp_run_end_time?"":r["a"].transDate(new Date(e.exp_run_end_time).getTime()),e.userName=e.user.Name,e.exp_name=e.experiment.exp_name})),e.dataList=Object.freeze(t.experiment_runs),e.pagination.totalPage=t.total||0}))},viewFlow:function(e){this.$router.push({name:"experimentFlow",query:{readonly:!0,exp_id:e.exp_id,exp_name:e.exp_name,exec_id:e.id}})},toJobExeRecord:function(e){this.$router.push({name:"jobExeRecord",query:{expRunId:e.id}})},viewLogFun:function(e){this.expLog=[],this.dialogVisible=!0,this.loading=!0,this.flowStatus=e.exp_exec_status,this.byStatusGetLog(e)},closeLog:function(){this.expLog=[],this.setTimeoutGetLog&&clearTimeout(this.setTimeoutGetLog)},byStatusGetLog:function(e){var t=this;"Inited,Scheduled,Running".indexOf(this.flowStatus)>-1?(this.FesApi.fetch("/di/".concat(this.FesEnv.diApiVersion,"/experimentRun/").concat(e.id,"/status"),"get").then((function(e){t.flowStatus=e.status})),this.setTimeoutGetLog=setTimeout((function(){t.byStatusGetLog(e)}),5e3)):this.setTimeoutGetLog&&clearTimeout(this.setTimeoutGetLog),this.getLog(e)},getLog:function(e){var t=this;this.FesApi.fetch("/di/".concat(this.FesEnv.diApiVersion,"/experimentRun/").concat(e.id,"/log"),{from_line:this.fromLine,size:-1},"get").then((function(e){e.log[3]&&(t.expLog=Object.freeze(t.expLog.concat(e.log[3].split("\n")))),t.loading=!1}),(function(){t.loading=!1}))},stopExperiment:function(e){var t=this;this.$confirm(this.$t("expExeRecord.endExperimentTip"),this.$t("common.prompt")).then((function(n){t.FesApi.fetch("/di/".concat(t.FesEnv.diApiVersion,"/experimentRun/").concat(e.id,"/kill"),"get").then((function(){t.deleteItemSuccess()}))})).catch((function(){}))},deleteItem:function(e){var t="/di/".concat(this.FesEnv.diApiVersion,"/experimentRun/").concat(e.id);this.deleteListItem(t)},resetListData:function(){this.pagination.pageNumber=1,this.query.query_str="",this.$refs.queryValidate.resetFields(),this.getListData()}},beforeDestroy:function(){this.setTimeoutGetLog&&clearTimeout(this.setTimeoutGetLog)}},c=u,l=(n("158c"),n("2877")),d=Object(l["a"])(c,o,i,!1,null,"7fcab0e4",null);t["default"]=d.exports},"669a":function(e,t,n){},cbb5:function(e,t,n){},db15:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tag",{attrs:{type:e.statusObj[e.status]}},[e._v(e._s(e.status))])},i=[],a=(n("cbb5"),n("450d"),n("8bbc")),s=n.n(a),r={components:{ElTag:s.a},props:{statusObj:{type:Object,default:function(){return{success:"success",info:"info",warning:"warning",danger:"danger"}}},status:{type:String,default:"success"}},data:function(){return{}}},u=r,c=(n("0353"),n("2877")),l=Object(c["a"])(u,o,i,!1,null,"0d8a0704",null);t["a"]=l.exports}}]);