(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ad68b25"],{"2a6c":function(e,t,s){"use strict";var i=s("626c"),o=s.n(i);o.a},"626c":function(e,t,s){},"95c8":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-process",style:e.isFromDss?"height:calc(100% + 36px)":"height:calc(100% - 36px)"},[s("div",{staticClass:"process-tabs"},[e.isFromDss?e._e():s("div",{staticClass:"process-tab"},e._l(e.tabs,(function(t,i){return s("div",{key:i,staticClass:"process-tab-item",class:{active:i===e.active},on:{click:function(t){return e.choose(i)},mouseenter:function(e){if(e.target!==e.currentTarget)return null;t.isHover=!0},mouseleave:function(e){if(e.target!==e.currentTarget)return null;t.isHover=!1}}},[s("div",[s("img",{staticClass:"tab-icon",class:e.nodeImg[t.node.type].class,attrs:{src:e.nodeImg[t.node.type].icon,alt:""}}),s("div",{staticClass:"process-tab-name",attrs:{title:e.$t(t.title)}},[e._v(e._s(e.$t(t.title)))]),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.isHover&&t.node&&t.node.isChange,expression:"!item.isHover && item.node && item.node.isChange"}],staticClass:"process-tab-unsave-icon fi-radio-on2"}),t.isHover&&t.close?s("i",{staticClass:"el-icon-close",on:{click:function(t){return t.stopPropagation(),e.remove(i)}}}):e._e()])])})),0),s("div",{staticClass:"process-container"},[e._l(e.tabs,(function(t,i){return["Process"===t.type?s("Process",{directives:[{name:"show",rawName:"v-show",value:i===e.active,expression:"index===active"}],key:i,ref:"process",refInFor:!0,attrs:{"import-replace":!1,"flow-id":t.data.flowId,"flow-name":t.data.name,version:t.data.version,readonly:t.data.readonly,tabs:e.tabs,"open-files":e.openFiles,"from-dss":e.isFromDss},on:{isChange:function(t){return e.isChange(i,arguments)},"check-opened":e.checkOpened,saveBaseInfo:e.saveBaseInfo,reloadPage:e.reloadPage}}):e._e()]}))],2)])])},o=[],n=(s("a4d3"),s("e01a"),s("d28b"),s("4de4"),s("caad"),s("c975"),s("d81d"),s("a434"),s("d3b7"),s("ac1f"),s("2532"),s("3ca3"),s("1276"),s("ddb0"),s("07da")),a=s("d58a"),r={inject:["reload"],components:{Process:n["a"]},props:{query:{type:Object,default:function(){}}},data:function(){return{tabs:[{title:"",type:"Process",close:!1,data:this.query,node:{isChange:!1,type:"workflow.subflow"},key:"flow.workflow",isHover:!1}],isFromDss:!1,active:0,openFiles:{},nodeImg:a["a"]}},created:function(){if(this.$route.query.exp_id)this.tabs[0].title=!0===this.query.readonly?"flow.readOnlyMode":"flow.editMode";else{var e=window.location.href,t=e.indexOf("?");e=decodeURIComponent(e.substring(t+1));var s=e.split("&"),i={},o=!0,n=!1,a=void 0;try{for(var r,c=s[Symbol.iterator]();!(o=(r=c.next()).done);o=!0){var l=r.value,d=l.substring(0,l.indexOf("=")),u=l.substring(l.indexOf("=")+1);i[d]=u}}catch(f){n=!0,a=f}finally{try{o||null==c.return||c.return()}finally{if(n)throw a}}console.log("param",i),this.tabs[0].data={flowId:parseInt(i.expId),readonly:!1,version:"",contextID:i.contextID,workspaceId:i.workspaceId,"bdp-user-ticket-id":i["bdp-user-ticket-id"]},this.isFromDss=!0}},methods:{reloadPage:function(){this.reload()},choose:function(e){this.active=e},remove:function(e){var t=this,s=this.tabs[e],i=this.openFiles[s.key]||[],o=this.tabs.filter((function(e){return i.includes(e.key)&&e.node.isChange}));if(o.length>0&&s.node.type===a["b"].FLOW){var n=this.$t("flow.closeExitSubNodeWorkflow");s.node.isChange&&(n=this.$t("flow.closeUnSavedWorkflowTip")),this.$confirm(n,this.$t("common.prompt")).then((function(e){t.active===e?(t.tabs.splice(e,1),t.choose(t.tabs.length-1)):t.tabs.splice(e,1)})).catch((function(){}))}else this.active>=e?(this.tabs.splice(e,1),this.choose(e-1)):this.tabs.splice(e,1)},check:function(e){var t=this;if(e){var s=!0;return this.tabs.map((function(i){if(e.key===i.key)s=!0;else{if(t.tabs.length>10)return void(s=!1);s=!0}})),s||this.$message.warning(this.$t("flow.openNodeTip")),s}return!(this.tabs.length>10)||(this.$message.warning(this.$t("flow.openNodeTip")),!1)},isChange:function(e,t){this.tabs[e].node&&(this.tabs[e].node.isChange=t[0])},beforeLeaveHook:function(){},checkOpened:function(e,t){},saveBaseInfo:function(e){this.tabs=this.tabs.map((function(t){return t.key===e.key&&(t.title=e.title),t}))}}},c=r,l=(s("2a6c"),s("2877")),d=Object(l["a"])(c,i,o,!1,null,"69d97628",null);t["default"]=d.exports}}]);