(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64387d24"],{"09ca":function(e,t,r){},"10f1":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("breadcrumb-nav"),r("el-form",{ref:"queryValidate",staticClass:"query",attrs:{model:e.query}},[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",[r("el-input",{attrs:{placeholder:e.$t("expExeRecord.enterSearchContent")},model:{value:e.query.query_str,callback:function(t){e.$set(e.query,"query_str",t)},expression:"query.query_str"}})],1)],1),r("el-col",{attrs:{span:16}},[r("el-button",{staticClass:"margin-l30",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.filterListData}},[e._v(" "+e._s(e.$t("common.filter"))+" ")]),r("el-button",{attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:e.resetQueryStrListData}},[e._v(" "+e._s(e.$t("common.reset"))+" ")]),r("el-button",{attrs:{type:"primary",icon:"plus-circle-o"},on:{click:e.openModel}},[e._v(" "+e._s(e.$t("serviceList.createModel"))+" ")])],1)],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","empty-text":e.$t("common.noData")}},[r("el-table-column",{attrs:{prop:"service_name","show-overflow-tooltip":!0,label:e.$t("serviceList.modelName")}}),r("el-table-column",{attrs:{prop:"model_name","show-overflow-tooltip":!0,label:e.$t("modelList.modelName")}}),r("el-table-column",{attrs:{prop:"version","show-overflow-tooltip":!0,label:e.$t("serviceList.modelVersion")}}),r("el-table-column",{attrs:{prop:"cpu","show-overflow-tooltip":!0,label:"CPU"}}),r("el-table-column",{attrs:{prop:"gpu","show-overflow-tooltip":!0,label:"GPU"}}),r("el-table-column",{attrs:{prop:"memory1","show-overflow-tooltip":!0,label:"Memory"}}),r("el-table-column",{attrs:{prop:"user_name","show-overflow-tooltip":!0,label:e.$t("user.user")}}),r("el-table-column",{attrs:{prop:"status","show-overflow-tooltip":!0,label:e.$t("DI.status")}}),r("el-table-column",{attrs:{prop:"last_updated_timestamp","show-overflow-tooltip":!0,label:e.$t("serviceList.updateTime")}}),r("el-table-column",{attrs:{label:e.$t("common.operation"),"min-width":"85"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-dropdown",{attrs:{size:"medium"},on:{command:e.handleCommand}},[r("el-button",{staticClass:"multi-operate-btn",attrs:{type:"text",icon:"el-icon-more",round:""}}),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},["Stop"===t.row.status?r("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("startRun",t.row)}},[e._v(e._s(e.$t("serviceList.run")))]):r("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("stoptRun",t.row)}},[e._v(e._s(e.$t("serviceList.stop")))]),r("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("deleteItem",t.row)}},[e._v(e._s(e.$t("common.delete")))]),r("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("detailModel",t.row)}},[e._v(e._s(e.$t("ns.viewDetails")))]),"Stop"!==t.row.status?r("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("updateModelService",t.row)}},[e._v(e._s(e.$t("serviceList.updateModelService")))]):e._e(),"Stop"!==t.row.status?r("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("containerList",t.row)}},[e._v(e._s(e.$t("serviceList.containerList")))]):e._e()],1)],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.pagination.pageNumber,"page-sizes":e.sizeList,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.totalPage,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("create-service",{ref:"modelDialog",attrs:{spaceOptionList:e.spaceOptionList,groupList:e.groupList},on:{getListData:e.getListData}}),r("view-service",{ref:"detailModel",attrs:{form:e.modelItem,groupList:e.groupList,spaceOptionList:e.spaceOptionList}}),r("update-service",{ref:"updateModelg",attrs:{groupList:e.groupList,spaceOptionList:e.spaceOptionList},on:{getListData:e.getListData}})],1)},a=[],s=(r("a4d3"),r("e01a"),r("d28b"),r("99af"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0"),r("ade3")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.$t("serviceList.createModel"),visible:e.dialogVisible,"custom-class":"dialog-style",width:"1100px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.clearDialogForm}},[r("step",{attrs:{step:e.currentStep,"step-list":e.stepList}}),r("el-form",{ref:"formValidate",staticClass:"add-form",attrs:{model:e.form,rules:e.ruleValidate,"label-width":"135px"}},[0===e.currentStep?r("div",{key:"step0"},[r("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("DI.basicSettings"))+" ")]),r("el-form-item",{attrs:{label:e.$t("serviceList.modelName"),prop:"service_name"}},[r("el-input",{attrs:{placeholder:e.$t("serviceList.modelNamePro")},model:{value:e.form.service_name,callback:function(t){e.$set(e.form,"service_name",t)},expression:"form.service_name"}})],1),r("el-form-item",{attrs:{label:e.$t("serviceList.modelDescription")}},[r("el-input",{attrs:{placeholder:e.$t("serviceList.modelDescriptionPro"),type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1):e._e(),1===e.currentStep?r("div",{key:"step1"},[r("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("DI.computingResource"))+" ")]),"single"!==e.form.deployType&&e.form.deployType?r("div",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$t("ns.nameSpace"),prop:"namespace"}},[r("el-select",{attrs:{filterable:"",placeholder:e.$t("ns.nameSpacePro")},model:{value:e.form.namespace,callback:function(t){e.$set(e.form,"namespace",t)},expression:"form.namespace"}},e._l(e.spaceOptionList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),e._l(e.form.ABTestSource,(function(t,o){return r("div",{key:o},[r("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.ABTestLable[o])+" ")]),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"CPU"}},[r("el-input",{attrs:{placeholder:e.$t("DI.CPUPro")},model:{value:e.form.ABTestSource[o].cpu,callback:function(t){e.$set(e.form.ABTestSource[o],"cpu",t)},expression:"form.ABTestSource[index].cpu"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v("Core")])])],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$t("AIDE.memory1")}},[r("el-input",{attrs:{placeholder:e.$t("DI.memoryPro")},model:{value:e.form.ABTestSource[o].memory,callback:function(t){e.$set(e.form.ABTestSource[o],"memory",t)},expression:"form.ABTestSource[index].memory"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v("Gi")])])],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"GPU"}},[r("el-input",{attrs:{placeholder:e.$t("DI.GPUPro")},model:{value:e.form.ABTestSource[o].gpu,callback:function(t){e.$set(e.form.ABTestSource[o],"gpu",t)},expression:"form.ABTestSource[index].gpu"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v(e._s(e.$t("AIDE.block")))])])],1)],1)],1)],1)}))],2):r("div",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$t("ns.nameSpace"),prop:"namespace"}},[r("el-select",{attrs:{filterable:"",placeholder:e.$t("ns.nameSpacePro")},model:{value:e.form.namespace,callback:function(t){e.$set(e.form,"namespace",t)},expression:"form.namespace"}},e._l(e.spaceOptionList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"CPU",prop:"cpu"}},[r("el-input",{attrs:{placeholder:e.$t("DI.CPUPro")},model:{value:e.form.cpu,callback:function(t){e.$set(e.form,"cpu",t)},expression:"form.cpu"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v("Core")])])],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$t("AIDE.memory1"),prop:"memory"}},[r("el-input",{attrs:{placeholder:e.$t("DI.memoryPro")},model:{value:e.form.memory,callback:function(t){e.$set(e.form,"memory",t)},expression:"form.memory"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v("Gi")])])],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"GPU",prop:"gpu"}},[r("el-input",{attrs:{placeholder:e.$t("DI.GPUPro")},model:{value:e.form.gpu,callback:function(t){e.$set(e.form,"gpu",t)},expression:"form.gpu"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v(e._s(e.$t("AIDE.block")))])])],1)],1)],1)],1)]):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:2===e.currentStep,expression:"currentStep===2"}],key:"step2"},[r("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("serviceList.deploymentInfoSingle"))+" ")]),e.dialogVisible?r("model-setting",{ref:"modelSetting",attrs:{groupList:e.groupList}}):e._e()],1)]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.currentStep>0?r("el-button",{attrs:{type:"primary"},on:{click:e.lastStep}},[e._v(" "+e._s(e.$t("common.lastStep"))+" ")]):e._e(),e.currentStep<2?r("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v(" "+e._s(e.$t("common.nextStep"))+" ")]):e._e(),2===e.currentStep?r("el-button",{attrs:{disabled:e.btnDisabled,type:"primary"},on:{click:e.subInfo}},[e._v(" "+e._s(e.$t("common.save"))+" ")]):e._e(),r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" "+e._s(e.$t("common.cancel"))+" ")])],1)],1)},l=[],n=(r("4d63"),r("ac1f"),r("25f0"),r("d374")),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"formValidate",staticClass:"add-form",attrs:{model:e.form,rules:e.ruleValidate,disabled:e.viewDetail,"label-width":"135px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$t("user.userGroup"),prop:"group_id"}},[e.viewDetail||e.modify?r("el-input",{attrs:{disabled:e.modify},model:{value:e.form.group_name,callback:function(t){e.$set(e.form,"group_name",t)},expression:"form.group_name"}}):r("el-select",{attrs:{placeholder:e.$t("user.userGroupSettingsPro"),disabled:e.modify,filterable:!0},on:{change:e.changeGroup},model:{value:e.form.group_id,callback:function(t){e.$set(e.form,"group_id",t)},expression:"form.group_id"}},e._l(e.groupList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e.form.group_id?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$t("modelList.modelName"),prop:"model_id"}},[e.viewDetail||e.modify?r("el-input",{attrs:{disabled:e.modify},model:{value:e.form.model_name,callback:function(t){e.$set(e.form,"model_name",t)},expression:"form.model_name"}}):r("el-select",{attrs:{disabled:e.modify,placeholder:e.$t("serviceList.modelNamePro1")},on:{change:e.selectChangeModel},model:{value:e.form.model_id,callback:function(t){e.$set(e.form,"model_id",t)},expression:"form.model_id"}},e._l(e.modelOptionList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.model_name,value:e.id}})})),1)],1)],1):e._e()],1),e.form.model_id?r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$t("serviceList.modelVersion"),prop:"modelversion_id"}},[r("el-select",{attrs:{placeholder:e.$t("serviceList.modelVersionPro")},on:{change:e.changeVersionId},model:{value:e.form.modelversion_id,callback:function(t){e.$set(e.form,"modelversion_id",t)},expression:"form.modelversion_id"}},e._l(e.versionOptionList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$t("serviceList.modelType"),prop:"model_type"}},[r("el-input",{attrs:{disabled:""},model:{value:e.form.model_type,callback:function(t){e.$set(e.form,"model_type",t)},expression:"form.model_type"}})],1)],1)],1):e._e(),e.form.model_type?r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$t("serviceList.serviceType"),placeholder:e.$t("serviceList.serviceTypePro"),prop:"endpoint_type"}},[r("el-select",{attrs:{disabled:e.modify},model:{value:e.form.endpoint_type,callback:function(t){e.$set(e.form,"endpoint_type",t)},expression:"form.endpoint_type"}},[r("el-option",{attrs:{value:"REST",label:"REST"}}),"TENSORFLOW"!==e.form.model_type?r("el-option",{attrs:{value:"GRPC",label:"GRPC"}}):e._e()],1)],1)],1)],1):e._e(),"CUSTOM"===e.form.model_type&&e.form.modelversion_id?r("el-form-item",{attrs:{label:e.$t("DI.imageSelection"),prop:"image"}},[r("el-select",{attrs:{placeholder:e.$t("DI.imagePro")},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}},e._l(e.imageOptionList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.image_name,value:e.image_name}})})),1)],1):e._e(),"TENSORFLOW"!==e.form.model_type||e.modify?e._e():r("div",[r("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("serviceList.serviceParam"))+" "),e.viewDetail?e._e():r("i",{staticClass:"el-icon-circle-plus-outline add",on:{click:e.addParam}})]),e._l(e.form.parameters,(function(t,o){return r("el-row",{key:o,staticClass:"padding-label",attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-form-item",{staticClass:"service-param",attrs:{"label-width":"0px",prop:"parameters["+o+"].name"}},[r("el-input",{attrs:{placeholder:e.$t("serviceList.paramNamePro")},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"item.name"}})],1)],1),r("el-col",{staticClass:"service-param",attrs:{span:7}},[r("el-form-item",{attrs:{prop:"parameters["+o+"].type","label-width":"0px"}},[r("el-input",{attrs:{placeholder:e.$t("serviceList.paramTypePro")},model:{value:t.type,callback:function(r){e.$set(t,"type",r)},expression:"item.type"}})],1)],1),r("el-col",{staticClass:"service-param",attrs:{span:8}},[r("el-form-item",{attrs:{prop:"parameters["+o+"].value","label-width":"0px"}},[r("el-input",{attrs:{placeholder:e.$t("serviceList.paramValuePro")},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"item.value"}})],1)],1),r("el-col",{staticClass:"subtitle",attrs:{span:2}},[e.viewDetail?e._e():r("i",{staticClass:"el-icon-remove-outline delete",on:{click:function(t){return e.deleteParam(o)}}})])],1)}))],2)],1)],1)},c=[],p=(r("a434"),r("b0c0"),{props:{formData:{type:Object,default:function(){return{}}},groupList:{type:Array,default:function(){return[]}},modify:{type:Boolean,default:!1},viewDetail:{type:Boolean,default:!1}},data:function(){return{modelOptionList:[],imageOptionList:[],versionOptionList:[],form:{group_id:"",model_id:"",modelversion_id:"",model_type:"",endpoint_type:"",image:"",parameters:[{name:"",type:"",value:""}]}}},computed:{ruleValidate:function(){return{image:[{required:!0,message:this.$t("DI.imageInputReq")}],group_id:[{required:!0,message:this.$t("user.userGroupSettingsReq")}],model_id:[{required:!0,message:this.$t("modelList.modelNameReq")}],modelversion_id:[{required:!0,message:this.$t("serviceList.modelVersionReq")}],endpoint_type:[{required:!0,message:this.$t("serviceList.serviceTypeReq")}],"parameters[0].name":[{required:!0,message:this.$t("serviceList.paramNameReq")}],"parameters[0].type":[{required:!0,message:this.$t("serviceList.paramTypeReq")}],"parameters[0].value":[{required:!0,message:this.$t("serviceList.paramValueReq")}]}}},created:function(){(this.modify||this.viewDetail)&&(Object.assign(this.form,this.formData),console.log("this.form",this.form),this.getVersionOption(this.formData.model_id),"CUSTOM"===this.formData.model_type&&this.getImageOption(this.formData.modelversion_id))},methods:{changeGroup:function(e){console.log("1111"),this.form.model_id="",this.form.modelversion_id="",this.versionOptionList=[],this.getModelOption(e)},getModelOption:function(e){var t=this;this.FesApi.fetch("/mf/v1/modelsByGroupID/".concat(e),{page:1,size:1e3},"get").then((function(e){t.modelOptionList=t.formatResList(e)}))},changeVersionId:function(e){"CUSTOM"===this.form.model_type&&(this.form.image="",this.getImageOption(e))},getImageOption:function(e){var t=this;this.FesApi.fetch("/mf/v1/images/".concat(e),{},"get").then((function(e){t.imageOptionList=t.formatResList(e)}))},selectChangeModel:function(e){this.form.modelversion_id="",this.imageOptionList=[];var t=!0,r=!1,o=void 0;try{for(var a,s=this.modelOptionList[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var i=a.value;if(i.id===e){this.form.model_type=i.model_type,this.form.group_name=i.group_name,this.form.model_name=i.model_name;break}}}catch(l){r=!0,o=l}finally{try{t||null==s.return||s.return()}finally{if(r)throw o}}this.getVersionOption(e)},getVersionOption:function(e){var t=this;this.FesApi.fetch("/mf/v1/modelversions/".concat(e),{page:1,size:1e3},"get").then((function(e){var r=[],o=!0,a=!1,s=void 0;try{for(var i,l=e.modelVersions[Symbol.iterator]();!(o=(i=l.next()).done);o=!0){var n=i.value;r.push({id:n.id,name:n.version,source:n.source})}}catch(m){a=!0,s=m}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}t.versionOptionList=t.formatResList(r)}))},byVersionIdFindSource:function(){var e="",t="",r=!0,o=!1,a=void 0;try{for(var s,i=this.versionOptionList[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var l=s.value;if(l.id===this.form.modelversion_id){e=l.name,t=l.source;break}}}catch(n){o=!0,a=n}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}this.form.modelVersion=e,this.form.source=t},addParam:function(){this.form.parameters.push({name:"",type:"",value:""}),this.addValidate()},addValidate:function(){var e=this.form.parameters.length-1;this.ruleValidate["parameters[".concat(e,"].name")]=this.ruleValidate["parameters[0].name"],this.ruleValidate["parameters[".concat(e,"].type")]=this.ruleValidate["parameters[0].type"],this.ruleValidate["parameters[".concat(e,"].value")]=this.ruleValidate["parameters[0].value"]},deleteParam:function(e){this.form.parameters.length>1&&this.form.parameters.splice(e,1)}}}),d=p,u=(r("16aa"),r("2877")),f=Object(u["a"])(d,m,c,!1,null,"443cd66f",null),v=f.exports,g={components:{Step:n["a"],ModelSetting:v},props:{spaceOptionList:{type:Array,default:function(){return[]}},groupList:{type:Array,default:function(){return[]}}},data:function(){return{form:{service_name:"",deployType:"single",remark:"",namespace:"",cpu:"",memory:"",gpu:"",ABTestSource:[{cpu:"",memory:"",gpu:""},{cpu:"",memory:"",gpu:""}]},parameters:[{name:"",type:"",value:""}],source:{},currentStep:0,btnDisabled:!1,dialogVisible:!1,ABTestLable:[this.$t("serviceList.modeln",{n:"A"}),this.$t("serviceList.modeln",{n:"B"})]}},computed:{stepList:function(){return[this.$t("DI.basicSettings"),this.$t("DI.computingResource"),this.$t("serviceList.modelSettings")]},ruleValidate:function(){return this.resetFormFields(),{service_name:[{required:!0,message:this.$t("serviceList.modelNameReq")},{type:"string",pattern:new RegExp(/^[a-z][a-z0-9-]*$/),message:this.$t("serviceList.modelNameFormat")}],namespace:[{required:!0,message:this.$t("ns.nameSpaceReq")}],cpu:[{required:!0,message:this.$t("DI.CPUReq")},{pattern:new RegExp(/^((0{1})([.]\d{1})|([1-9]\d*)([.]\d{1})?)$/),message:this.$t("AIDE.CPUNumberReq")}],memory:[{required:!0,message:this.$t("DI.memoryReq")},{pattern:new RegExp(/^[1-9]\d*([.]0)*$/),message:this.$t("AIDE.memoryNumberReq")}],gpu:[{pattern:new RegExp(/^(([1-9]{1}\d*([.]0)*)|([0]{1}))$/),message:this.$t("AIDE.GPUFormat")}]}}},methods:{lastStep:function(){3===this.currentStep&&(this.parameters=JSON.parse(JSON.stringify(this.$refs.serviceParam.form.parameters))),this.currentStep>0&&this.currentStep--},nextStep:function(){var e=this;this.$refs.formValidate.validate((function(t){t&&e.currentStep<e.stepList.length-1&&e.currentStep++}))},subInfo:function(){var e=this;this.$refs.formValidate.validate((function(t){if(t&&"single"===e.form.deployType){var r=e.$refs.modelSetting;r.$refs.formValidate.validate((function(t){if(t){e.btnDisabled=!0,r.byVersionIdFindSource();var o=r.form;e.sendRequest(o)}}))}}))},sendRequest:function(e){var t=this,r={cpu:parseFloat(this.form.cpu),type:"single",memory:parseInt(this.form.memory),group_id:parseInt(e.group_id),service_post_models:[{model_name:e.model_name,model_type:e.model_type,group_name:e.group_name,model_version:e.modelVersion,modelversion_id:parseInt(e.modelversion_id),source:e.source,image:e.image}]};r.service_post_models[0].endpoint_type=e.endpoint_type,"TENSORFLOW"===e.model_type&&(r.service_post_models[0].parameters=e.parameters);for(var o=["service_name","namespace","gpu","remark"],a=0,s=o;a<s.length;a++){var i=s[a];r[i]=this.form[i]}this.FesApi.fetch("/mf/v1/service",r,"post").then((function(){t.dialogVisible=!1,t.toast(),t.$emit("getListData"),t.btnDisabled=!1})).finally((function(){t.btnDisabled=!1}))},clearDialogForm:function(){for(var e in this.btnDisabled=!1,this.currentStep=0,this.$refs.formValidate.resetFields(),this.form)this.form[e]="";this.form.deployType="single"}}},b=g,h=(r("8471"),Object(u["a"])(b,i,l,!1,null,"0a424644",null)),_=h.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.$t("ns.viewDetails"),visible:e.dialogVisible,"custom-class":"dialog-style",width:"1100px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"formValidate",staticClass:"add-form",attrs:{model:e.form,disabled:e.disable,"label-width":"135px"}},[r("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("DI.basicSettings"))+" ")]),r("el-form-item",{attrs:{label:e.$t("serviceList.modelName")}},[r("el-input",{model:{value:e.form.service_name,callback:function(t){e.$set(e.form,"service_name",t)},expression:"form.service_name"}})],1),r("el-form-item",{attrs:{label:e.$t("serviceList.modelDescription")}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),r("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("DI.computingResource"))+" ")]),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$t("ns.nameSpace")}},[r("el-select",{model:{value:e.form.namespace,callback:function(t){e.$set(e.form,"namespace",t)},expression:"form.namespace"}},e._l(e.spaceOptionList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"CPU"}},[r("el-input",{model:{value:e.form.cpu,callback:function(t){e.$set(e.form,"cpu",t)},expression:"form.cpu"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v("Core")])])],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$t("AIDE.memory1")}},[r("el-input",{model:{value:e.form.memory,callback:function(t){e.$set(e.form,"memory",t)},expression:"form.memory"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v("Gi")])])],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"GPU"}},[r("el-input",{model:{value:e.form.gpu,callback:function(t){e.$set(e.form,"gpu",t)},expression:"form.gpu"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v(e._s(e.$t("AIDE.block")))])])],1)],1)],1),r("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("serviceList.deploymentInfo"))+" ")]),e.dialogVisible?r("model-setting",{attrs:{"form-data":e.form,"view-detail":!0}}):e._e()],1)],1)},$=[],L={components:{ModelSetting:v},props:{form:{type:Object,default:function(){return{service_name:"",version:"",remark:"",namespace:"",cpu:"",memory:"",gpu:"",model_type:"",type:"",parameters:[]}}},groupList:{type:Array,default:function(){return[]}},disable:{type:Boolean,default:!0},spaceOptionList:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1}}},w=L,S=(r("f5f3"),Object(u["a"])(w,y,$,!1,null,"0a290510",null)),O=S.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.$t("serviceList.updateModelService"),visible:e.dialogVisible,"custom-class":"dialog-style",width:"1100px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.clearDialogForm}},[r("el-form",{ref:"formValidate",staticClass:"add-form",attrs:{model:e.form,rules:e.formValidate,"label-width":"135px"}},[r("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("DI.basicSettings"))+" ")]),r("el-form-item",{attrs:{label:e.$t("serviceList.modelName"),prop:"service_name"}},[r("el-input",{attrs:{disabled:"",placeholder:e.$t("serviceList.modelNamePro")},model:{value:e.form.service_name,callback:function(t){e.$set(e.form,"service_name",t)},expression:"form.service_name"}})],1),r("el-form-item",{attrs:{label:e.$t("serviceList.modelDescription")}},[r("el-input",{attrs:{placeholder:e.$t("serviceList.modelDescriptionPro"),type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),r("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("DI.computingResource"))+" ")]),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"CPU",prop:"cpu"}},[r("el-input",{attrs:{placeholder:e.$t("DI.CPUPro")},model:{value:e.form.cpu,callback:function(t){e.$set(e.form,"cpu",t)},expression:"form.cpu"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v("Core")])])],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:e.$t("AIDE.memory1"),prop:"memory"}},[r("el-input",{attrs:{placeholder:e.$t("DI.memoryPro")},model:{value:e.form.memory,callback:function(t){e.$set(e.form,"memory",t)},expression:"form.memory"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v("Gi")])])],1)],1)],1),r("el-form-item",{attrs:{label:"GPU",prop:"gpu"}},[r("el-input",{attrs:{placeholder:e.$t("DI.GPUPro")},model:{value:e.form.gpu,callback:function(t){e.$set(e.form,"gpu",t)},expression:"form.gpu"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v(e._s(e.$t("AIDE.block")))])])],1),r("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("serviceList.deploymentInfo"))+" ")]),e.dialogVisible?r("model-setting",{ref:"modelSetting",attrs:{"group-list":e.groupList,"form-data":e.form,modify:!0}}):e._e()],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",disabled:e.btnDisabled},on:{click:e.subInfo}},[e._v(" "+e._s(e.$t("common.save"))+" ")]),r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" "+e._s(e.$t("common.cancel"))+" ")])],1)],1)},x=[];r("a9e3"),r("b680");function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P={components:{ModelSetting:v},props:{groupList:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,form:{service_name:"",remark:"",cpu:"",memory:"",gpu:"",modelversion_id:"",modelversion:"",source:"",image:"",service_id:"",namespace:"",endpoint_type:""},imageOptionList:[],resetSource:!1,btnDisabled:!1}},computed:{formValidate:function(){return this.resetFormFields(),{cpu:[{required:!0,message:this.$t("DI.CPUReq")},{pattern:new RegExp(/^((0{1})([.]\d{1})|([1-9]\d*)([.]\d{1})?)$/),message:this.$t("AIDE.CPUNumberReq")}],memory:[{required:!0,message:this.$t("DI.memoryReq")},{pattern:new RegExp(/^[1-9]\d*([.]0)*$/),message:this.$t("AIDE.memoryNumberReq")}],gpu:[{pattern:new RegExp(/^(([1-9]{1}\d*([.]0)*)|([0]{1}))$/),message:this.$t("AIDE.GPUFormat")}],modelversion_id:[{required:!0,message:this.$t("serviceList.modelVersionReq")}]}}},methods:{subInfo:function(){var e=this;this.$refs.formValidate.validate((function(t){if(t){var r=e.$refs.modelSetting;r.$refs.formValidate.validate((function(t){if(t){e.btnDisabled=!0;var o=I({},e.form);o.gpu=o.gpu+"",o.cpu=+Number(o.cpu).toFixed(1),o.memory=+o.memory;var a=r.form;r.byVersionIdFindSource();for(var s=["modelversion","image","source"],i=0,l=s;i<l.length;i++){var n=l[i];o[n]=a[n]}o.modelversion_id=parseInt(a.modelversion_id),delete o.model_type,e.FesApi.fetch("/mf/v1/service/".concat(e.form.service_id),o,"put").then((function(){e.btnDisabled=!1,e.dialogVisible=!1,e.toast(),e.$emit("getListData")})).finally((function(){e.btnDisabled=!1}))}}))}}))},changeVersionId:function(e){var t=this;this.FesApi.fetch("/mf/v1/images/".concat(e),{},"get").then((function(e){e.length>0?t.imageOptionList=t.formatResList(e):(t.form.image="",t.imageOptionList=[])}))},clearDialogForm:function(){for(var e in this.btnDisabled=!1,this.resetSource=!1,this.form)this.form[e]="";this.$refs.formValidate.resetFields()}}},V=P,C=(r("27fe"),Object(u["a"])(V,D,x,!1,null,"23875628",null)),R=C.exports,q=r("6322"),A=r("21f4");function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j={mixins:[q["a"]],components:{CreateService:_,ViewService:O,UpdateService:R},data:function(){return{query:{query_str:""},spaceOptionList:[],dataList:[],groupList:[],modify:!1,setIntervalList:null,modelItem:{}}},mounted:function(){this.getListData(),this.getDISpaceOption(),this.getGroupList(),this.setIntervalList=setInterval(this.getListData,6e4)},methods:{openModel:function(){this.$refs.modelDialog.dialogVisible=!0},getListData:function(){var e=this,t={page:this.pagination.pageNumber,size:this.pagination.pageSize,query_str:this.query.query_str},r="/mf/v1/services";this.FesApi.fetch(r,t,"get").then((function(t){var r=!0,o=!1,a=void 0;try{for(var s,i=t.models[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var l=s.value;l.last_updated_timestamp=A["a"].transDate(l.last_updated_timestamp),l.version=l.modelversion.version,l.memory1=l.memory+"Gi",l.gpu=l.gpu?l.gpu:0}}catch(n){o=!0,a=n}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}e.dataList=e.formatResList(t),e.pagination.totalPage=t.total||e.dataList.length}))},deleteItem:function(e){var t="/mf/v1/service/".concat(e.service_id);this.deleteListItem(t)},startRun:function(e){for(var t=this,r={},o=["service_id","service_name","type","namespace","creation_timestamp","last_updated_timestamp","cpu","memory","group_id","log_path","remark","image"],a=0,s=o;a<s.length;a++){var i=s[a];r[i]=e[i]}r.Gpu=e.gpu+"",r.service_post_models=[{modelversion_id:e.modelversion_id,model_name:e.model_name,model_type:e.model_type,group_name:e.group_name,source:e.modelversion.source,model_version:e.modelversion.version}],"TENSORFLOW"===e.model_type&&(r.service_post_models[0].parameters=JSON.parse(e.modelversion.params)),this.FesApi.fetch("/mf/v1/serviceRun",r,"post").then((function(e){setTimeout((function(){t.toast(),t.getListData()}),500)}))},stoptRun:function(e){var t=this;this.FesApi.fetch("/mf/v1/serviceStop/".concat(e.namespace,"/").concat(e.service_name,"/").concat(e.service_id),"get").then((function(e){setTimeout((function(){t.toast(),t.getListData()}),500)}))},getFormKey:function(e,t){return e.group_id=t.group_id,e.model_id=t.modelversion.model_id+"",e.modelversion=t.modelversion.version,["cpu","gpu","memory","modelversion_id","service_id","namespace","service_name","remark","model_type","endpoint_type","group_name","model_name","image"]},updateModelService:function(e){var t=this.$refs.updateModelg,r={},o=this.getFormKey(r,e),a=!0,s=!1,i=void 0;try{for(var l,n=o[Symbol.iterator]();!(a=(l=n.next()).done);a=!0){var m=l.value;r[m]=e[m]}}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}r.source=e.modelversion.source,t.form=r,t.changeVersionId(e.modelversion_id),t.dialogVisible=!0},detailModel:function(e){var t={},r=this.getFormKey(t,e),o=!0,a=!1,s=void 0;try{for(var i,l=r[Symbol.iterator]();!(o=(i=l.next()).done);o=!0){var n=i.value;t[n]=e[n]}}catch(m){a=!0,s=m}finally{try{o||null==l.return||l.return()}finally{if(a)throw s}}t.model_id=e.modelversion.model_id,t.modelversion=e.modelversion.version,"TENSORFLOW"===e.model_type&&(t.parameters=e.modelversion.params&&JSON.parse(e.modelversion.params)),this.modelItem=F({},t),this.$refs.detailModel.dialogVisible=!0},containerList:function(e){this.$router.push({path:"/model/serviceList/".concat(e.namespace,"/").concat(e.service_name)})}},beforeDestroy:function(){this.setIntervalList=null}},T=j,N=Object(u["a"])(T,o,a,!1,null,null,null);t["default"]=N.exports},1148:function(e,t,r){"use strict";var o=r("a691"),a=r("1d80");e.exports="".repeat||function(e){var t=String(a(this)),r="",s=o(e);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(r+=t);return r}},"16aa":function(e,t,r){"use strict";var o=r("1ad4"),a=r.n(o);a.a},"1ad4":function(e,t,r){},"232d":function(e,t,r){"use strict";var o=r("09ca"),a=r.n(o);a.a},"27fe":function(e,t,r){"use strict";var o=r("93e8"),a=r.n(o);a.a},"408a":function(e,t,r){var o=r("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=o(e))throw TypeError("Incorrect invocation");return+e}},"4de4":function(e,t,r){"use strict";var o=r("23e7"),a=r("b727").filter,s=r("1dde"),i=r("ae40"),l=s("filter"),n=i("filter");o({target:"Array",proto:!0,forced:!l||!n},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},8471:function(e,t,r){"use strict";var o=r("e18d"),a=r.n(o);a.a},"93e8":function(e,t,r){},ade3:function(e,t,r){"use strict";function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return o}))},b64b:function(e,t,r){var o=r("23e7"),a=r("7b0b"),s=r("df75"),i=r("d039"),l=i((function(){s(1)}));o({target:"Object",stat:!0,forced:l},{keys:function(e){return s(a(e))}})},b680:function(e,t,r){"use strict";var o=r("23e7"),a=r("a691"),s=r("408a"),i=r("1148"),l=r("d039"),n=1..toFixed,m=Math.floor,c=function(e,t,r){return 0===t?r:t%2===1?c(e,t-1,r*e):c(e*e,t/2,r)},p=function(e){var t=0,r=e;while(r>=4096)t+=12,r/=4096;while(r>=2)t+=1,r/=2;return t},d=n&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!l((function(){n.call({})}));o({target:"Number",proto:!0,forced:d},{toFixed:function(e){var t,r,o,l,n=s(this),d=a(e),u=[0,0,0,0,0,0],f="",v="0",g=function(e,t){var r=-1,o=t;while(++r<6)o+=e*u[r],u[r]=o%1e7,o=m(o/1e7)},b=function(e){var t=6,r=0;while(--t>=0)r+=u[t],u[t]=m(r/e),r=r%e*1e7},h=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==u[e]){var r=String(u[e]);t=""===t?r:t+i.call("0",7-r.length)+r}return t};if(d<0||d>20)throw RangeError("Incorrect fraction digits");if(n!=n)return"NaN";if(n<=-1e21||n>=1e21)return String(n);if(n<0&&(f="-",n=-n),n>1e-21)if(t=p(n*c(2,69,1))-69,r=t<0?n*c(2,-t,1):n/c(2,t,1),r*=4503599627370496,t=52-t,t>0){g(0,r),o=d;while(o>=7)g(1e7,0),o-=7;g(c(10,o,1),0),o=t-1;while(o>=23)b(1<<23),o-=23;b(1<<o),g(1,1),b(2),v=h()}else g(0,r),g(1<<-t,0),v=h()+i.call("0",d);return d>0?(l=v.length,v=f+(l<=d?"0."+i.call("0",d-l)+v:v.slice(0,l-d)+"."+v.slice(l-d))):v=f+v,v}})},d374:function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"step-steps"},[r("ul",e._l(e.stepList,(function(t,o){return r("li",{key:o},[r("span",{class:{"steps-dot":"steps-dot","steps-current":o===e.step,"steps-finish":e.step>o}}),e._v(" "+e._s(t)+" ")])})),0)])},a=[],s=(r("a9e3"),{props:{step:{type:Number,default:function(){return 0}},stepList:{type:Array,default:function(){return[]}}}}),i=s,l=(r("232d"),r("2877")),n=Object(l["a"])(i,o,a,!1,null,"283c0962",null);t["a"]=n.exports},dbb4:function(e,t,r){var o=r("23e7"),a=r("83ab"),s=r("56ef"),i=r("fc6a"),l=r("06cf"),n=r("8418");o({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,r,o=i(e),a=l.f,m=s(o),c={},p=0;while(m.length>p)r=a(o,t=m[p++]),void 0!==r&&n(c,t,r);return c}})},e023:function(e,t,r){},e18d:function(e,t,r){},e439:function(e,t,r){var o=r("23e7"),a=r("d039"),s=r("fc6a"),i=r("06cf").f,l=r("83ab"),n=a((function(){i(1)})),m=!l||n;o({target:"Object",stat:!0,forced:m,sham:!l},{getOwnPropertyDescriptor:function(e,t){return i(s(e),t)}})},f5f3:function(e,t,r){"use strict";var o=r("e023"),a=r.n(o);a.a}}]);