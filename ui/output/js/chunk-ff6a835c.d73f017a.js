(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff6a835c"],{"09ca":function(e,t,a){},"09de":function(e,t,a){"use strict";var o=a("968c"),r=a.n(o);r.a},"232d":function(e,t,a){"use strict";var o=a("09ca"),r=a.n(o);r.a},"24f2":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.$t("DI.viewlog"),visible:e.logDialog,"custom-class":"dialog-style","close-on-click-modal":!1,width:"920px"},on:{"update:visible":function(t){e.logDialog=t},close:e.closeLogDialog}},[a("div",{staticClass:"log-box"},[e.logDetail.length>0?a("div",{staticClass:"detail-arr"},e._l(e.logDetail,(function(t,o){return a("div",{key:o},[e.isObject(t.log)?a("div",e._l(t.log,(function(t,o){return a("div",{key:o,staticClass:"detail-info"},[e._v(" "+e._s(o)+":"+e._s(t)+" ")])})),0):a("div",{staticClass:"detail-info"},[e._v(" "+e._s(t.log)+" ")])])})),0):a("div",{staticClass:"no-data"},[e._v(" "+e._s(e.$t("common.noData"))+" ")])]),e.logPagination.totalPage>0?a("el-pagination",{attrs:{"current-page":e.logPagination.pageNumber,"page-sizes":e.sizeList,"page-size":e.logPagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.logPagination.totalPage,background:""},on:{"size-change":e.handleLogSizeChange,"current-change":e.handleLogCurrentChange}}):e._e()],1)},r=[],s=(a("a4d3"),a("e01a"),a("d28b"),a("dca8"),a("d3b7"),a("3ca3"),a("ddb0"),a("53ca")),n={props:{url:{type:String,default:""}},data:function(){return{logDialog:!1,logDetail:[],sizeList:[20,50,100],logPagination:{pageSize:20,pageNumber:1,totalPage:0}}},watch:{logDialog:function(e){e&&this.getLog()}},methods:{getLog:function(){var e=this;this.FesApi.fetch(this.url,{currentPage:this.logPagination.pageNumber,pageSize:this.logPagination.pageSize},"get").then((function(t){var a=!0,o=!1,r=void 0;try{for(var n,i=t.log_list[Symbol.iterator]();!(a=(n=i.next()).done);a=!0){var l=n.value;try{"object"===Object(s["a"])(JSON.parse(l.log))&&(l.log=JSON.parse(l.log))}catch(m){}}}catch(c){o=!0,r=c}finally{try{a||null==i.return||i.return()}finally{if(o)throw r}}e.logDetail=Object.freeze(t.log_list),e.logPagination.totalPage=t.total||0,e.logDialog=!0}))},isObject:function(e){var t=Object(s["a"])(e);return!!e&&"object"===t},handleLogSizeChange:function(e){this.logPagination.pageSize=e,this.getLog()},handleLogCurrentChange:function(e){this.logPagination.pageNumber=e,this.getLog()},closeLogDialog:function(){this.logPagination.pageNumber=1}}},i=n,l=(a("09de"),a("2877")),m=Object(l["a"])(i,o,r,!1,null,"577d44e0",null);t["a"]=m.exports},"4de4":function(e,t,a){"use strict";var o=a("23e7"),r=a("b727").filter,s=a("1dde"),n=a("ae40"),i=s("filter"),l=n("filter");o({target:"Array",proto:!0,forced:!i||!l},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"968c":function(e,t,a){},"96b0":function(e,t,a){"use strict";var o=a("d383"),r=a.n(o);r.a},ade3:function(e,t,a){"use strict";function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return o}))},b64b:function(e,t,a){var o=a("23e7"),r=a("7b0b"),s=a("df75"),n=a("d039"),i=n((function(){s(1)}));o({target:"Object",stat:!0,forced:i},{keys:function(e){return s(r(e))}})},cbb5:function(e,t,a){},d374:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-steps"},[a("ul",e._l(e.stepList,(function(t,o){return a("li",{key:o},[a("span",{class:{"steps-dot":"steps-dot","steps-current":o===e.step,"steps-finish":e.step>o}}),e._v(" "+e._s(t)+" ")])})),0)])},r=[],s=(a("a9e3"),{props:{step:{type:Number,default:function(){return 0}},stepList:{type:Array,default:function(){return[]}}}}),n=s,i=(a("232d"),a("2877")),l=Object(i["a"])(n,o,r,!1,null,"283c0962",null);t["a"]=l.exports},d383:function(e,t,a){},dbb4:function(e,t,a){var o=a("23e7"),r=a("83ab"),s=a("56ef"),n=a("fc6a"),i=a("06cf"),l=a("8418");o({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){var t,a,o=n(e),r=i.f,m=s(o),c={},u=0;while(m.length>u)a=r(o,t=m[u++]),void 0!==a&&l(c,t,a);return c}})},e439:function(e,t,a){var o=a("23e7"),r=a("d039"),s=a("fc6a"),n=a("06cf").f,i=a("83ab"),l=r((function(){n(1)})),m=!i||l;o({target:"Object",stat:!0,forced:m,sham:!i},{getOwnPropertyDescriptor:function(e,t){return n(s(e),t)}})},eefb:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("breadcrumb-nav"),a("el-form",{ref:"queryValidate",staticClass:"query",attrs:{model:e.query,rules:e.ruleValidate,"label-width":"85px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.$t("ns.nameSpace")}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:e.$t("ns.nameSpacePro")},model:{value:e.query.namespace,callback:function(t){e.$set(e.query,"namespace",t)},expression:"query.namespace"}},e._l(e.spaceOptionList,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.$t("user.user"),prop:"userName"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:e.$t("user.userPro")},model:{value:e.query.userName,callback:function(t){e.$set(e.query,"userName",t)},expression:"query.userName"}},e._l(e.userOptionList,(function(e){return a("el-option",{key:e.id,attrs:{value:e.name,label:e.name}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-button",{staticClass:"margin-l30",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.filterListData}},[e._v(" "+e._s(e.$t("common.filter"))+" ")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-refresh-left"},on:{click:e.resetListData}},[e._v(" "+e._s(e.$t("common.reset"))+" ")]),a("el-button",{attrs:{type:"primary",icon:"plus-circle-o"},on:{click:e.showCreateDialog}},[e._v(" "+e._s(e.$t("AIDE.createNotebook"))+" ")])],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","empty-text":e.$t("common.noData")}},[a("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,label:e.$t("DI.name"),"min-width":"100"}}),a("el-table-column",{attrs:{prop:"user","show-overflow-tooltip":!0,label:e.$t("user.user")}}),a("el-table-column",{attrs:{prop:"namespace","show-overflow-tooltip":!0,label:e.$t("ns.nameSpace"),"min-width":"200"}}),a("el-table-column",{attrs:{prop:"cpu","show-overflow-tooltip":!0,label:e.$t("AIDE.cpu"),"min-width":"50"}}),a("el-table-column",{attrs:{prop:"gpu","show-overflow-tooltip":!0,label:e.$t("AIDE.gpu"),"min-width":"50"}}),a("el-table-column",{attrs:{prop:"memory","show-overflow-tooltip":!0,label:e.$t("AIDE.memory1"),"min-width":"70"}}),a("el-table-column",{attrs:{prop:"image","show-overflow-tooltip":!0,label:e.$t("DI.image"),"min-width":"200"}}),a("el-table-column",{attrs:{prop:"status","show-overflow-tooltip":!0,label:e.$t("DI.status")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{class:{pointer:"Stop"!==t.row.status},attrs:{type:e.statusObj[t.row.status]},on:{click:function(a){return e.nodeBookStatus(t.row)}}},[e._v(e._s(t.row.status))])]}}])}),a("el-table-column",{attrs:{prop:"uptime","show-overflow-tooltip":!0,label:e.$t("DI.createTime"),"min-width":"100"}}),a("el-table-column",{attrs:{label:e.$t("common.operation"),"min-width":"75"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{size:"medium"},on:{command:e.handleCommand}},[a("el-button",{staticClass:"multi-operate-btn",attrs:{type:"text",icon:"el-icon-more",round:""}}),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("visitNotebook",t.row),disabled:"Ready"!==t.row.status}},[e._v(e._s(e.$t("AIDE.access")))]),a("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("deleteJob",t.row)}},[e._v(e._s(e.$t("common.delete")))]),a("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("copyJob",t.row)}},[e._v(e._s(e.$t("common.copy")))]),"Ready"===t.row.status?a("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("getLog",t.row)}},[e._v(e._s(e.$t("DI.viewlog")))]):e._e(),"Terminated"!==t.row.status&&"Creating"!==t.row.status&&"Stopping"!==t.row.status&&"Stopped"!==t.row.status?a("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("editYarn",t.row)}},[e._v(e._s(e.$t("AIDE.setting")))]):e._e(),"Ready"===t.row.status||"Waiting"===t.row.status?a("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("disableJob",t.row)}},[e._v(e._s(e.$t("AIDE.stop")))]):e._e(),"Stopped"===t.row.status?a("el-dropdown-item",{attrs:{command:e.beforeHandleCommand("enableJob",t.row)}},[e._v(e._s(e.$t("AIDE.enable")))]):e._e()],1)],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pagination.pageNumber,"page-sizes":e.sizeList,"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.totalPage,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:e.$t("AIDE.createNotebook"),visible:e.dialogVisible,"custom-class":"dialog-style","close-on-click-modal":!1,width:"1150px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.clearDialogForm1}},[a("step",{attrs:{step:e.currentStep,"step-list":e.stepList}}),a("el-form",{ref:"formValidate",staticClass:"add-node-form",attrs:{model:e.form,rules:e.ruleValidate,"label-width":"155px"}},[0===e.currentStep?a("div",{key:"step0"},[a("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("DI.basicSettings"))+" ")]),a("el-form-item",{attrs:{label:e.$t("AIDE.NotebookName"),prop:"name",maxlength:"225"}},[a("el-input",{attrs:{placeholder:e.$t("AIDE.NotebookPro")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1):e._e(),1===e.currentStep?a("div",{key:"step1"},[a("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("DI.imageSettings"))+" ")]),a("el-row",[a("el-form-item",{attrs:{label:e.$t("DI.imageType"),prop:"image.imageType"}},[a("el-radio-group",{on:{change:e.changeImageType},model:{value:e.form.image.imageType,callback:function(t){e.$set(e.form.image,"imageType",t)},expression:"form.image.imageType"}},[a("el-radio",{attrs:{label:"Standard"}},[e._v(e._s(e.$t("DI.standard")))]),a("el-radio",{attrs:{label:"Custom"}},[e._v(e._s(e.$t("DI.custom")))])],1)],1)],1),a("el-row",[e.isCustom?e._e():a("el-form-item",{attrs:{label:e.$t("DI.imageSelection"),prop:"image.imageOption"}},[a("span",[e._v(" "+e._s(e.defineImage)+" ")]),a("el-select",{attrs:{filterable:"",placeholder:e.$t("DI.imagePro")},model:{value:e.form.image.imageOption,callback:function(t){e.$set(e.form.image,"imageOption",t)},expression:"form.image.imageOption"}},e._l(e.imageOptionList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),e.isCustom?a("el-form-item",{key:"imageInput",attrs:{label:e.$t("DI.imageSelection"),prop:"image.imageInput"}},[a("span",[e._v(" "+e._s(e.defineImage)+" ")]),a("el-input",{attrs:{placeholder:e.$t("DI.imageInputPro")},model:{value:e.form.image.imageInput,callback:function(t){e.$set(e.form.image,"imageInput",t)},expression:"form.image.imageInput"}})],1):e._e()],1)],1):e._e(),2===e.currentStep?a("div",{key:"step2"},[a("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("DI.computingResource"))+" ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("ns.nameSpace"),prop:"namespace"}},[a("el-select",{attrs:{filterable:"",placeholder:e.$t("ns.nameSpacePro")},model:{value:e.form.namespace,callback:function(t){e.$set(e.form,"namespace",t)},expression:"form.namespace"}},e._l(e.spaceOptionList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("AIDE.cpu"),prop:"cpu"}},[a("el-input",{attrs:{placeholder:e.$t("AIDE.CPUPro")},model:{value:e.form.cpu,callback:function(t){e.$set(e.form,"cpu",t)},expression:"form.cpu"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("Core")])])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("AIDE.memory"),prop:"memory"}},[a("el-input",{attrs:{placeholder:e.$t("AIDE.memoryPro")},model:{value:e.form.memory,callback:function(t){e.$set(e.form,"memory",t)},expression:"form.memory"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("Gi")])])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("AIDE.gpu"),prop:"extraResources"}},[a("el-input",{attrs:{placeholder:e.$t("AIDE.gpuPro")},model:{value:e.form.extraResources,callback:function(t){e.$set(e.form,"extraResources",t)},expression:"form.extraResources"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v(e._s(e.$t("AIDE.block")))])])],1)],1)],1),a("el-form-item",{attrs:{label:e.$t("AIDE.sparkResourceSettings")}},[a("el-switch",{model:{value:e.form.cluster,callback:function(t){e.$set(e.form,"cluster",t)},expression:"form.cluster"}})],1),!0===e.form.cluster?a("el-row",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("AIDE.instanceNumber"),prop:"sparkSessionNum"}},[a("el-input",{attrs:{maxlength:"225",placeholder:e.$t("AIDE.instanceNumberPro")},model:{value:e.form.sparkSessionNum,callback:function(t){e.$set(e.form,"sparkSessionNum",t)},expression:"form.sparkSessionNum"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("AIDE.queueSettings"),prop:"queue"}},[a("el-input",{attrs:{maxlength:"225",placeholder:e.$t("DI.queuePro")},model:{value:e.form.queue,callback:function(t){e.$set(e.form,"queue",t)},expression:"form.queue"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("DI.driverMemory"),prop:"driverMemory"}},[a("el-input",{attrs:{maxlength:"10",placeholder:e.$t("DI.driverMemoryPro")},model:{value:e.form.driverMemory,callback:function(t){e.$set(e.form,"driverMemory",t)},expression:"form.driverMemory"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("Gi")])])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("DI.executorInstances"),prop:"executorCores"}},[a("el-input",{attrs:{maxlength:"10",placeholder:e.$t("DI.executorInstancesPro")},model:{value:e.form.executorCores,callback:function(t){e.$set(e.form,"executorCores",t)},expression:"form.executorCores"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("Core")])])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("DI.executorMemory"),prop:"executorMemory"}},[a("el-input",{attrs:{maxlength:"10",placeholder:e.$t("DI.executorMemoryPro")},model:{value:e.form.executorMemory,callback:function(t){e.$set(e.form,"executorMemory",t)},expression:"form.executorMemory"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("Gi")])])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("DI.linkisInstance"),prop:"executors"}},[a("el-input",{attrs:{maxlength:"10",placeholder:e.$t("DI.linkisInstancePro")},model:{value:e.form.executors,callback:function(t){e.$set(e.form,"executors",t)},expression:"form.executors"}})],1)],1)],1):e._e()],1):e._e(),3===e.currentStep?a("div",{key:"step3"},[a("el-row",[a("el-form-item",{attrs:{label:e.$t("AIDE.settingType")}},[a("el-radio-group",{model:{value:e.storageDefalut,callback:function(t){e.storageDefalut=t},expression:"storageDefalut"}},[a("el-radio",{attrs:{label:"true"}},[e._v(e._s(e.$t("AIDE.default")))]),a("el-radio",{attrs:{label:"false"}},[e._v(e._s(e.$t("DI.custom")))])],1)],1)],1),"true"==e.storageDefalut?a("div",[a("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("AIDE.workspace"))+" ")]),a("el-row",[a("el-form-item",{attrs:{label:e.$t("DI.localPath"),prop:"workspaceVolume.localPath"}},[a("el-select",{attrs:{disabled:e.haveProxy,filterable:"",placeholder:e.$t("AIDE.workLocalPathNodePro")},model:{value:e.form.workspaceVolume.localPath,callback:function(t){e.$set(e.form.workspaceVolume,"localPath",t)},expression:"form.workspaceVolume.localPath"}},e._l(e.localPathList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:e.$t("AIDE.mountPath"),prop:"workspaceVolume.mountPath"}},[a("el-input",{attrs:{placeholder:e.$t("AIDE.mountPathPro"),disabled:""},model:{value:e.form.workspaceVolume.mountPath,callback:function(t){e.$set(e.form.workspaceVolume,"mountPath",t)},expression:"form.workspaceVolume.mountPath"}})],1)],1)],1):e._e(),"false"==e.storageDefalut?a("div",{staticClass:"subtitle data-space"},[e._v(" "+e._s(e.$t("AIDE.dataStorageSettings"))+" ")]):e._e(),"false"==e.storageDefalut?a("div",e._l(e.form.dataVolume,(function(t,o){return a("div",{key:"dataVolume"+o},[a("el-row",[a("el-form-item",{attrs:{label:e.$t("DI.localPath"),prop:"dataVolume["+o+"].localPath"}},[a("el-select",{attrs:{filterable:"",disabled:e.haveProxy,placeholder:e.$t("AIDE.dataLocalPathNodePro")},model:{value:t.localPath,callback:function(a){e.$set(t,"localPath",a)},expression:"item.localPath"}},e._l(e.localPathList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:e.$t("AIDE.subpath"),prop:"dataVolume["+o+"].subPath"}},[a("el-input",{attrs:{placeholder:e.$t("AIDE.subpathPro")},model:{value:t.subPath,callback:function(a){e.$set(t,"subPath",a)},expression:"item.subPath"}})],1),a("el-form-item",{attrs:{label:e.$t("AIDE.mountPath"),prop:"dataVolume["+o+"].mountPath"}},[a("el-input",{attrs:{placeholder:e.$t("AIDE.dataMountPathPro")},model:{value:t.mountPath,callback:function(a){e.$set(t,"mountPath",a)},expression:"item.mountPath"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("AIDE.mountType"),prop:"dataVolume["+o+"].mountType"}},[a("el-select",{attrs:{placeholder:e.$t("AIDE.mountTypePro")},model:{value:t.mountType,callback:function(a){e.$set(t,"mountType",a)},expression:"item.mountType"}},[a("el-option",{attrs:{value:"New",label:e.$t("AIDE.nodeDirectory")}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("AIDE.accessMode"),prop:"dataVolume["+o+"].accessMode"}},[a("el-select",{attrs:{placeholder:e.$t("AIDE.accessModePro")},model:{value:t.accessMode,callback:function(a){e.$set(t,"accessMode",a)},expression:"item.accessMode"}},[a("el-option",{attrs:{value:"ReadOnlyMany",label:e.$t("AIDE.readOnly")}}),a("el-option",{attrs:{value:"ReadWriteMany",label:e.$t("AIDE.readWrite")}})],1)],1)],1)],1)],1)})),0):e._e()],1):e._e()]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.currentStep>0?a("el-button",{attrs:{type:"primary"},on:{click:e.lastStep}},[e._v(" "+e._s(e.$t("common.lastStep"))+" ")]):e._e(),e.currentStep<3?a("el-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v(" "+e._s(e.$t("common.nextStep"))+" ")]):e._e(),3===e.currentStep?a("el-button",{attrs:{disabled:e.btnDisabled,type:"primary"},on:{click:e.subInfo}},[e._v(" "+e._s(e.$t("common.save"))+" ")]):e._e(),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v(" "+e._s(e.$t("common.cancel"))+" ")])],1)],1),a("el-dialog",{attrs:{title:e.$t("AIDE.editYarn"),visible:e.yarnDialog,"custom-class":"dialog-style","close-on-click-modal":!1,width:"1100px"},on:{"update:visible":function(t){e.yarnDialog=t}}},[a("el-form",{ref:"yarnForm",attrs:{rules:e.ruleValidate,model:e.yarnForm,"label-width":"190px"}},[a("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("DI.imageSettings"))+" ")]),a("el-form-item",{attrs:{label:e.$t("DI.imageType"),prop:"image.imageType"}},[a("el-radio-group",{model:{value:e.yarnForm.image.imageType,callback:function(t){e.$set(e.yarnForm.image,"imageType",t)},expression:"yarnForm.image.imageType"}},[a("el-radio",{attrs:{label:"Standard"}},[e._v(e._s(e.$t("DI.standard")))]),a("el-radio",{attrs:{label:"Custom"}},[e._v(e._s(e.$t("DI.custom")))])],1)],1),a("el-row",["Standard"===e.yarnForm.image.imageType?a("el-form-item",{attrs:{label:e.$t("DI.imageSelection"),prop:"image.imageOption"}},[a("span",[e._v(" "+e._s(e.defineImage)+" ")]),a("el-select",{attrs:{filterable:"",placeholder:e.$t("DI.imagePro")},model:{value:e.yarnForm.image.imageOption,callback:function(t){e.$set(e.yarnForm.image,"imageOption",t)},expression:"yarnForm.image.imageOption"}},e._l(e.imageOptionList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1):a("el-form-item",{key:"imageInput",attrs:{label:e.$t("DI.imageSelection"),prop:"image.imageInput"}},[a("span",[e._v(" "+e._s(e.defineImage)+" ")]),a("el-input",{attrs:{placeholder:e.$t("DI.imageInputPro")},model:{value:e.yarnForm.image.imageInput,callback:function(t){e.$set(e.yarnForm.image,"imageInput",t)},expression:"yarnForm.image.imageInput"}})],1)],1),a("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("DI.computingResource"))+" ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("AIDE.memory"),prop:"memory"}},[a("el-input",{attrs:{placeholder:e.$t("AIDE.memoryPro")},model:{value:e.yarnForm.memory,callback:function(t){e.$set(e.yarnForm,"memory",t)},expression:"yarnForm.memory"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("Gi")])])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("AIDE.cpu"),prop:"cpu"}},[a("el-input",{attrs:{placeholder:e.$t("AIDE.CPUPro")},model:{value:e.yarnForm.cpu,callback:function(t){e.$set(e.yarnForm,"cpu",t)},expression:"yarnForm.cpu"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("Core")])])],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("AIDE.gpu"),prop:"extraResources"}},[a("el-input",{attrs:{placeholder:e.$t("AIDE.gpuPro")},model:{value:e.yarnForm.extraResources,callback:function(t){e.$set(e.yarnForm,"extraResources",t)},expression:"yarnForm.extraResources"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v(e._s(e.$t("AIDE.block")))])])],1)],1)],1),a("div",{staticClass:"subtitle"},[e._v(" "+e._s(e.$t("AIDE.sparkResourceSettings"))+" ")]),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("AIDE.instanceNumber"),prop:"sparkSessionNum"}},[a("el-input",{attrs:{maxlength:"225",placeholder:e.$t("AIDE.instanceNumberPro")},model:{value:e.yarnForm.sparkSessionNum,callback:function(t){e.$set(e.yarnForm,"sparkSessionNum",t)},expression:"yarnForm.sparkSessionNum"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("AIDE.queueSettings"),prop:"queue"}},[a("el-input",{attrs:{maxlength:"225",placeholder:e.$t("DI.queuePro")},model:{value:e.yarnForm.queue,callback:function(t){e.$set(e.yarnForm,"queue",t)},expression:"yarnForm.queue"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("DI.driverMemory"),prop:"driverMemory"}},[a("el-input",{attrs:{maxlength:"10",placeholder:e.$t("DI.driverMemoryPro")},model:{value:e.yarnForm.driverMemory,callback:function(t){e.$set(e.yarnForm,"driverMemory",t)},expression:"yarnForm.driverMemory"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("Gi")])])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("DI.executorInstances"),prop:"executorCores"}},[a("el-input",{attrs:{maxlength:"10",placeholder:e.$t("DI.executorInstancesPro")},model:{value:e.yarnForm.executorCores,callback:function(t){e.$set(e.yarnForm,"executorCores",t)},expression:"yarnForm.executorCores"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("Core")])])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("DI.executorMemory"),prop:"executorMemory"}},[a("el-input",{attrs:{maxlength:"10",placeholder:e.$t("DI.executorMemoryPro")},model:{value:e.yarnForm.executorMemory,callback:function(t){e.$set(e.yarnForm,"executorMemory",t)},expression:"yarnForm.executorMemory"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("Gi")])])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.$t("DI.linkisInstance"),prop:"executors"}},[a("el-input",{attrs:{maxlength:"10",placeholder:e.$t("DI.linkisInstancePro")},model:{value:e.yarnForm.executors,callback:function(t){e.$set(e.yarnForm,"executors",t)},expression:"yarnForm.executors"}})],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveYarnForm}},[e._v(" "+e._s(e.$t("common.save"))+" ")]),a("el-button",{on:{click:e.cannelSaveYarnForm}},[e._v(" "+e._s(e.$t("common.cancel"))+" ")])],1)],1),a("el-dialog",{attrs:{title:e.$t("AIDE.notebookStatus"),visible:e.waitingStatusDialog,"custom-class":"dialog-style","close-on-click-modal":!1,width:"920px"},on:{"update:visible":function(t){e.waitingStatusDialog=t}}},[a("div",{staticClass:"status-box"},[a("el-row",[a("el-col",{staticClass:"label",attrs:{span:5}},[e._v(e._s(e.$t("AIDE.resourceStaus")))]),a("el-col",{staticClass:"content",attrs:{span:19}},[e._v(e._s(e.waitingStatus.notebook_status))])],1),a("el-row",{staticClass:"status-height"},[a("el-col",{staticClass:"label ",attrs:{span:5}},[e._v(e._s(e.$t("AIDE.statusMessage")))]),a("el-col",{staticClass:"content",attrs:{span:19}},[e._v(e._s(e.waitingStatus.notebook_status_info))])],1),a("el-row",{staticClass:"container-height"},[a("el-col",{staticClass:"label",attrs:{span:5}},[e._v(e._s(e.$t("AIDE.containerSatus")))]),a("el-col",{staticClass:"content ",attrs:{span:19}},[a("div",{staticClass:"detail-arr"},[e._v("[ "),e._l(e.waitingStatus.containers_status_info,(function(t,o){return a("div",{key:o,staticClass:"detail-obj"},[e._v("{ "),e._l(t,(function(t,o){return a("div",{key:o,staticClass:"detail-info"},[e._v(' "'+e._s(o)+'"："'+e._s(t)+'", ')])})),e._v(" }, ")],2)})),e._v(" ] ")],2)])],1)],1)]),a("view-log",{ref:"viewLog",attrs:{url:e.logUrl}})],1)},r=[],s=(a("a4d3"),a("e01a"),a("d28b"),a("99af"),a("4de4"),a("4160"),a("c975"),a("b0c0"),a("a9e3"),a("dca8"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("3ca3"),a("159b"),a("ddb0"),a("ade3")),n=(a("cbb5"),a("450d"),a("8bbc")),i=a.n(n),l=a("21f4"),m=a("d374"),c=a("24f2"),u=a("6322");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={mixins:[u["a"]],components:{Step:m["a"],ElTag:i.a,ViewLog:c["a"]},data:function(){return{dialogVisible:!1,query:{namespace:"",userName:""},currentStep:0,form:{name:"",cpu:"",extraResources:"",memory:"",sparkSessionNum:0,queue:"",namespace:"",driverMemory:"",executorCores:"",executorMemory:"",executors:"",cluster:!1,image:{imageType:"Standard",imageOption:"",imageInput:""},workspaceVolume:{accessMode:"",localPath:"",subPath:"",mountPath:"",mountType:"",size:0},dataVolume:[{accessMode:"",localPath:"",subPath:"",mountPath:"",mountType:"",size:0}]},localPathList:[],loading:!1,dataList:[],userOptionList:[],spaceOptionList:[],yarnDialog:!1,originForm:{},yarnForm:{image:{imageType:"Standard",imageOption:"",imageInput:""},cpu:"",memory:"",extraResources:"",sparkSessionNum:0,queue:"",driverMemory:"",executorCores:"",executorMemory:"",executors:""},userId:localStorage.getItem("userId"),storageDefalut:"true",statusObj:{Ready:"success",Waiting:"",Creating:"",Stopping:"warning",Stopped:"warning",Terminate:"danger"},setIntervalList:null,waitingStatusDialog:!1,waitingStatus:{},logUrl:""}},mounted:function(){this.getListData(),this.getDIUserOption(),this.getDISpaceOption(),this.getDIStoragePath(),this.setIntervalList=setInterval(this.getListData,6e4)},computed:{noDataText:function(){return this.loading?"":this.$t("common.noData")},stepList:function(){return[this.$t("DI.basicSettings"),this.$t("DI.imageSettings"),this.$t("DI.computingResource"),this.$t("AIDE.storageSettings")]},defineImage:function(){return this.FesEnv.AIDE.defineImage},imageOptionList:function(){return this.FesEnv.AIDE.imageOption},isCustom:function(){return"Custom"===this.form.image.imageType},ruleValidate:function(){return this.resetQueryFields(),this.resetFormFields(),{name:[{required:!0,message:this.$t("AIDE.NotebookNameReq")},{type:"string",pattern:new RegExp(/^[a-z][a-z0-9-]*$/),message:this.$t("AIDE.NotebookNameFormatReq")}],namespace:[{required:!0,message:this.$t("ns.nameSpaceReq")}],"image.imageType":[{required:!0,message:this.$t("DI.imageTypeReq")}],"image.imageOption":[{required:!0,message:this.$t("DI.imageColumnReq")}],"image.imageInput":[{required:!0,message:this.$t("DI.imageColumnReq")},{pattern:new RegExp(/^[a-zA-Z0-9][a-zA-Z0-9-._]*$/),message:this.$t("DI.imageInputFormat")}],cpu:[{required:!0,message:this.$t("DI.CPUReq")},{pattern:new RegExp(/^((0{1})([.]\d{1})|([1-9]\d*)([.]\d{1})?)$/),message:this.$t("AIDE.CPUNumberReq")}],memory:[{required:!0,message:this.$t("DI.memoryReq")},{pattern:new RegExp(/^[1-9]\d*([.]0)*$/),message:this.$t("AIDE.memoryNumberReq")}],sparkSessionNum:[{pattern:new RegExp(/^(([0]|([1-9]\d*))([.]0)*)$/),message:this.$t("AIDE.instanceNumberFormat")}],queue:[{pattern:new RegExp(/^[a-zA-Z0-9][a-zA-Z0-9_.]*$/),message:this.$t("DI.queueFormat")}],driverMemory:[{pattern:new RegExp(/^[1-9]\d*([.]0)*$/),message:this.$t("DI.driverMemoryFormat")},{pattern:new RegExp(/^.{0,10}$/),message:this.$t("AIDE.driverMemoryMax")}],executorCores:[{pattern:new RegExp(/^[1-9]\d*([.]0)*$/),message:this.$t("DI.executorInstancesFormat")},{pattern:new RegExp(/^.{0,10}$/),message:this.$t("AIDE.executorInstancesMax")}],executors:[{pattern:new RegExp(/^[1-9]\d*([.]0)*$/),message:this.$t("AIDE.executorFormat")},{pattern:new RegExp(/^.{0,10}$/),message:this.$t("AIDE.executorsMax")}],executorMemory:[{pattern:new RegExp(/^[1-9]\d*([.]0)*$/),message:this.$t("DI.executorMemoryFormat")},{pattern:new RegExp(/^.{0,10}$/),message:this.$t("AIDE.executorMemoryMax")}],"workspaceVolume.localPath":[{required:!0,message:this.$t("DI.localPathReq")},{pattern:new RegExp(/^\/\w[0-9a-zA-Z-_/]*$/),message:this.$t("AIDE.localPathFormat")}],"workspaceVolume.mountPath":[{required:!0,message:this.$t("AIDE.mountPathReq")}],"dataVolume[0].localPath":[{required:!0,message:this.$t("DI.localPathReq")},{pattern:new RegExp(/^\/\w[0-9a-zA-Z-_/]*$/),message:this.$t("AIDE.localPathFormat")}],"dataVolume[0].subPath":[{pattern:new RegExp(/^[a-zA-Z][0-9a-zA-Z-_/]*$/),message:this.$t("AIDE.subpathReq")}],"dataVolume[0].mountPath":[{required:!0,message:this.$t("AIDE.mountPathReq")},{pattern:new RegExp(/^\/\w[0-9a-zA-Z-_/]*$/),message:this.$t("AIDE.dataMountPathFormat")}],"dataVolume[0].mountType":[{required:!0,message:this.$t("AIDE.mountTypeReq")}],"dataVolume[0].accessMode":[{required:!0,message:this.$t("AIDE.accessModeReq")}],extraResources:[{pattern:new RegExp(/^(([1-9]{1}\d*([.]0)*)|([0]{1}))$/),message:this.$t("AIDE.GPUFormat")}]}}},methods:{showCreateDialog:function(){this.form.workspaceVolume.mountPath="/home/".concat(this.userId,"/workspace"),this.dialogVisible=!0},visitNotebook:function(e){var t="/cc/".concat(this.FesEnv.ccApiVersion,"/auth/access/namespaces/").concat(e.namespace,"/notebooks/").concat(e.name),a=new XMLHttpRequest;a.open("GET",t,!1),a.setRequestHeader("Mlss-Userid",this.userId),a.onreadystatechange=function(e){if(4===this.readyState&&200===this.status){var t=JSON.parse(this.responseText).result;t.notebookAddress&&window.open(window.encodeURI(t.notebookAddress))}else{var a=JSON.parse(this.responseText);401===this.status||403===this.status?this.fetchError[this.status](a):this.$Message.error(a.message)}},a.send()},getLog:function(e){this.logUrl="/aide/v1/namespaces/".concat(e.namespace,"/notebooks/").concat(e.name,"/log"),this.$refs.viewLog.logDialog=!0},deleteJob:function(e){var t="/aide/".concat(this.FesEnv.aideApiVersion,"/notebooks/").concat(e.id);this.deleteListItem(t)},enableJob:function(e){var t=this;this.FesApi.fetch("/aide/".concat(this.FesEnv.aideApiVersion,"/notebooks/").concat(e.id,"/start"),"post").then((function(){t.toast(),t.getListData()}))},disableJob:function(e){var t=this;this.FesApi.fetch("/aide/".concat(this.FesEnv.aideApiVersion,"/notebooks/").concat(e.id,"/stop"),"delete").then((function(){t.toast(),t.getListData()}))},copyJob:function(e){for(var t=this,a={},o=["cpu","namespace","queue","cluster","executorCores","executorMemory","executors","driverMemory"],r=0,s=o;r<s.length;r++){var n=s[r];a[n]=e[n]}a.memory=parseInt(e.memory),a.extraResources=e.gpu+"";var i=this.imageOptionList.indexOf(e.image)>-1?"Standard":"Custom";a.image={imageType:i,imageOption:"",imageInput:""},a.sparkSessionNum=e.sparkSessionNum?e.sparkSessionNum:0,a.executorMemory=isNaN(parseInt(a.executorMemory))?"":parseInt(a.executorMemory)+"",a.driverMemory=isNaN(parseInt(a.driverMemory))?"":parseInt(a.driverMemory)+"","Standard"===i?a.image.imageOption=e.image:a.image.imageInput=e.image,setTimeout((function(){if(Object.assign(t.form,a),e.dataVolume){var o=t.dataVolumeInfo();for(var r in e.dataVolume)r>0&&t.addValidateItem(o.column,r,"dataVolume"),t.form.dataVolume[r]=e.dataVolume[r];t.storageDefalut="false",t.form.workspaceVolume.mountPath="/home/".concat(t.userId,"/workspace"),t.haveProxy&&(t.form.workspaceVolume.localPath=e.dataVolume[0].localPath)}else t.form.workspaceVolume=e.workspaceVolume,t.haveProxy&&(t.form.dataVolume[0].localPath=e.workspaceVolume.localPath),t.storageDefalut="true"}),100),this.dialogVisible=!0},nodeBookStatus:function(e){var t=this,a=e.status.toLowerCase();"stop"!==a&&(this.waitingStatus={},this.FesApi.fetch("/aide/v1/notebooks/".concat(e.id,"/status"),"get").then((function(e){t.waitingStatus=e,t.waitingStatusDialog=!0})))},nextStep:function(){var e=this;this.$refs.formValidate.validate((function(t){if(t&&e.currentStep<e.stepList.length-1){if(2===e.currentStep&&e.form.cluster&&parseInt(e.form.sparkSessionNum)>e.FesEnv.AIDE.SparkSessionCount)return void e.$message.warning(e.$t("AIDE.instancesNumberFormatN",{n:e.FesEnv.AIDE.SparkSessionCount}));e.currentStep++}}))},getListData:function(){var e=this;this.loading=!0;var t="",a={page:this.pagination.pageNumber,size:this.pagination.pageSize};if(this.query.namespace&&this.query.userName)t="/aide/".concat(this.FesEnv.aideApiVersion,"/namespaces/").concat(this.query.namespace,"/user/").concat(this.query.userName,"/notebooks");else if(this.query.namespace&&!this.query.userName)t="/aide/".concat(this.FesEnv.aideApiVersion,"/namespaces/").concat(this.query.namespace,"/notebooks");else{var o=localStorage.getItem("superAdmin");if("true"===o)t="/aide/".concat(this.FesEnv.aideApiVersion,"/namespaces/null/user/null/notebooks");else{var r=this.query.userName?this.query.userName:this.userId;t="/aide/".concat(this.FesEnv.aideApiVersion,"/user/").concat(r,"/notebooks")}}this.FesApi.fetch(t,a,"get").then((function(t){t&&"{}"!==JSON.stringify(t)&&(t.list&&t.list.forEach((function(e){var t=e.image.indexOf(":");e.image=e.image.substring(t+1),e.gpu=e.gpu||0,e.uptime=e.uptime?l["a"].transDate(e.uptime):"",e.queue&&(e.cluster=!0)})),e.dataList=Object.freeze(t.list),e.pagination.totalPage=t.total||0),e.loading=!1}),(function(){e.dataList=[],e.loading=!1}))},subInfo:function(){var e=this;this.$refs.formValidate.validate((function(t){if(t){e.setBtnDisabeld();var a={},o=["name","namespace"];o=e.form.cluster?o.concat(["queue","executorCores","executorMemory","executors","driverMemory"]):o;var r=!0,s=!1,n=void 0;try{for(var i,l=o[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var m=i.value;"name"===m||"namespace"===m?a[m]=e.form[m]:""!==e.form[m]&&(a[m]=e.form[m])}}catch(p){s=!0,n=p}finally{try{r||null==l.return||l.return()}finally{if(s)throw n}}e.form.cluster&&(a.sparkSessionNum=e.form.sparkSessionNum?parseInt(e.form.sparkSessionNum):0),a.cpu=parseFloat(e.form.cpu),a.memory={memoryAmount:parseInt(e.form.memory),memoryUnit:"Gi"},a.extraResources=JSON.stringify({"nvidia.com/gpu":e.form.extraResources});var c="Standard"===e.form.image.imageType?e.form.image.imageOption:e.form.image.imageInput,u=e.defineImage+":"+c;a.image={imageName:u},a.image.imageType=e.form.image.imageType,"true"===e.storageDefalut?a.workspaceVolume=d({},e.form.workspaceVolume,{},{accessMode:"ReadWriteMany",mountType:"New"}):a.dataVolume=d({},e.form.dataVolume[0]),e.FesApi.fetch("/aide/".concat(e.FesEnv.aideApiVersion,"/namespaces/namespace/notebooks"),a,"post").then((function(){e.getListData(),e.toast(),e.dialogVisible=!1}))}}))},dataVolumeInfo:function(){return{lg:this.form.dataVolume.length,column:["accessMode","localPath","subPath","mountPath","mountType"]}},changeImageType:function(e){"Custom"===e?this.form.image.imageOption="":this.form.image.imageInput=""},addValidateItem:function(e,t,a){var o=!0,r=!1,s=void 0;try{for(var n,i=e[Symbol.iterator]();!(o=(n=i.next()).done);o=!0){var l=n.value;this.ruleValidate["".concat(a,"[").concat(t,"].").concat(l)]=this.ruleValidate["".concat(a,"[").concat(t-1,"].").concat(l)]}}catch(m){r=!0,s=m}finally{try{o||null==i.return||i.return()}finally{if(r)throw s}}},deleteValidateItem:function(e,t,a){var o=!0,r=!1,s=void 0;try{for(var n,i=e[Symbol.iterator]();!(o=(n=i.next()).done);o=!0){var l=n.value;delete this.ruleValidate["".concat(a,"[").concat(t-1,"].").concat(l)]}}catch(m){r=!0,s=m}finally{try{o||null==i.return||i.return()}finally{if(r)throw s}}},clearDialogForm1:function(){var e=this,t=this.dataVolumeInfo();if(t.lg>1)for(var a=t.lg;a>1;a--)this.deleteValidateItem(t.column,a,"dataVolume");this.haveProxy=!1,this.$refs.formValidate.resetFields();for(var o=["name","cpu","extraResources","memory","namespace","queue","driverMemory","executorCores","executorMemory","executors"],r=0,s=o;r<s.length;r++){var n=s[r];this.form[n]=""}for(var i in this.form.image)this.form.image[i]="imageType"===i?"Standard":"";this.form.sparkSessionNum=0,this.form.workspaceVolume={accessMode:"",localPath:"",subPath:"",mountPath:"/home/".concat(this.userId,"/workspace"),mountType:"",size:0},this.form.dataVolume=[{accessMode:"",localPath:"",subPath:"",mountPath:"",mountType:"",size:0}],this.form.cluster=!1,setTimeout((function(){e.currentStep=0,e.storageDefalut="true",console.log("this.form",e.form)}),1e3)},editYarn:function(e){this.yarnDialog=!0;var t=this.imageOptionList.indexOf(e.image)>-1?"Standard":"Custom",a={imageType:t,imageOption:"",imageInput:""};"Standard"===t?a.imageOption=e.image:a.imageInput=e.image,this.yarnForm={id:e.id,image:a,memory:parseInt(e.memory),cpu:e.cpu,extraResources:e.gpu+"",sparkSessionNum:isNaN(parseInt(e.sparkSessionNum))?0:e.sparkSessionNum+"",queue:e.queue||"",driverMemory:isNaN(parseInt(e.driverMemory))?"":parseInt(e.driverMemory)+"",executorCores:isNaN(parseInt(e.executorCores))?"":parseInt(e.executorCores)+"",executorMemory:isNaN(parseInt(e.executorMemory))?"":parseInt(e.executorMemory)+"",executors:isNaN(parseInt(e.executors))?"":parseInt(e.executors)+""},this.originForm={memoryAmount:parseInt(e.memory),cpu:parseFloat(e.cpu),extraResources:e.gpu+""},this.originForm.image=d({},a)},saveYarnForm:function(){var e=this;this.$refs.yarnForm.validate((function(t){if(t){var a={};a.queue=e.yarnForm.queue,a.executorCores=e.yarnForm.executorCores,a.executors=e.yarnForm.executors,a.cpu=parseFloat(e.yarnForm.cpu),a.memoryAmount=parseInt(e.yarnForm.memory),a.memoryUnit="Gi",a.extraResources=JSON.stringify({"nvidia.com/gpu":e.yarnForm.extraResources});var o="Standard"===e.yarnForm.image.imageType?e.yarnForm.image.imageOption:e.yarnForm.image.imageInput;if(a.imageName=e.defineImage+":"+o,a.imageType=e.yarnForm.image.imageType,a.sparkSessionNum=""===e.yarnForm.sparkSessionNum?0:parseInt(e.yarnForm.sparkSessionNum),a.driverMemory=Number(e.yarnForm.driverMemory)>0?e.yarnForm.driverMemory+"g":"",a.executorMemory=Number(e.yarnForm.executorMemory)>0?e.yarnForm.executorMemory+"g":"",parseInt(a.sparkSessionNum)>e.FesEnv.AIDE.SparkSessionCount)return void e.$message.warning(e.$t("AIDE.instancesNumberFormatN",{n:e.FesEnv.AIDE.SparkSessionCount}));var r=!1;r="Standard"===e.originForm.image.imageType?e.originForm.image.imageOption!==e.yarnForm.image.imageOption:e.originForm.image.imageInput!==e.yarnForm.image.imageInput;for(var s=["cpu","memoryAmount"],n=0,i=s;n<i.length;n++){var l=i[n];e.originForm[l]!==a[l]&&(r=!0)}e.originForm.extraResources!==e.yarnForm.extraResources&&(r=!0),r?e.$alert(e.$t("AIDE.resourceModifyFormat"),e.$t("common.prompt"),{confirmButtonText:e.$t("common.comfirm"),callback:function(t){e.submitYarnForm(a)}}):e.submitYarnForm(a)}}))},submitYarnForm:function(e){var t=this;this.FesApi.fetch("/aide/".concat(this.FesEnv.aideApiVersion,"/notebooks/").concat(this.yarnForm.id),e,{method:"patch",headers:{"Mlss-Userid":this.userId}}).then((function(){t.getListData(),t.toast(),t.yarnDialog=!1}))},cannelSaveYarnForm:function(){this.yarnDialog=!1,this.$refs.yarnForm.resetFormFields()}},beforeDestroy:function(){clearInterval(this.setIntervalList)}},f=g,h=(a("96b0"),a("2877")),b=Object(h["a"])(f,o,r,!1,null,"375d4709",null);t["default"]=b.exports}}]);